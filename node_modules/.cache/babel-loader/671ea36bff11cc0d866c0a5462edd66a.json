{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\phil\\\\OneDrive\\\\Documents\\\\reliant\\\\code\\\\narwhal-digital-reliant-wp\\\\src\\\\templates\\\\ProductDetail\\\\ProductBody.js\";\nimport React from 'react';\nimport { useQuery } from '@apollo/react-hooks';\nimport { useScrollPosition } from '@n8tb1t/use-scroll-position';\nimport gql from 'graphql-tag';\nimport PropTypes from 'prop-types';\nimport SEO from '../../components/SEO';\nimport ArrowNoStem from '../../assets/svgs/arrow-no-stem';\nimport ContactForm from '../../components/FlexibleContent/ContactForm';\nimport ProductListing from '../../components/ProductListing';\nimport ProductTabs from '../../components/ProductTabs';\nimport ResourceListing from '../../components/ResourceListing';\nimport ResourcesCTA from '../../components/FlexibleContent/ResourcesCTA';\nimport Variables from '../../assets/scss/config/_variables.scss';\n\nconst ProductBody = props => {\n  const topAreaHeight = 150; // top area height used for knowing when to sticky scroll\n\n  const stickyScrollExtraBottomPadding = 20;\n  const mainContainer = 'product-body__main-container';\n  const CONTACT_FORM_QUERY = gql`\n\t\tquery CONTACT_FORM_QUERY {\n\t\t\toptions {\n\t\t\t\tglobalOptions {\n\t\t\t\t\ttab1Title\n\t\t\t\t\ttab1InnerHeading\n\t\t\t\t\ttab1FormId\n\t\t\t\t\ttab2Title\n\t\t\t\t\ttab2InnerHeading\n\t\t\t\t\ttab2FormId\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t`; // making the contact form sticky is done by adding a top-padding to contactFormScrollableArea\n\n  useScrollPosition(({\n    prevPos,\n    currPos\n  }) => {\n    // we dont want to have sticky scrolling if on mobile\n    if (window.innerWidth <= Variables.breakpointLarge) {\n      resetScrollAreaTopPadding();\n      return;\n    }\n\n    const productContentArea = document.querySelector('#productContentArea');\n    const contactFormScrollableArea = document.querySelector('#contactFormScrollableArea');\n    var contactFormScrollableAreaInner = document.querySelector('#contactFormScrollableAreaInner');\n\n    if (!contactFormScrollableArea || !productContentArea || !contactFormScrollableAreaInner) {\n      console.warn('Could not find divs needed to make contact form sticky!');\n      return;\n    }\n\n    const productContentAreaRect = productContentArea.getBoundingClientRect(); // const contactFormScrollableAreaRect = contactFormScrollableArea.getBoundingClientRect();\n\n    const contactFormScrollableAreaInnerRect = contactFormScrollableAreaInner.getBoundingClientRect(); // if the contact form is taller than the product area then don't scroll\n\n    if (contactFormScrollableAreaInnerRect.height >= productContentAreaRect.height) {\n      resetScrollAreaTopPadding();\n      return;\n    } // we don't want to have sticky scroll if form is taller than visible area\n    // console.log(`window.innerHeight: ${window.innerHeight}, contactFormScrollableAreaInnerRect + topAreaHeight: ${(contactFormScrollableAreaInnerRect.height + topAreaHeight)}`);\n\n\n    if (window.innerHeight <= contactFormScrollableAreaInnerRect.height + topAreaHeight) {\n      resetScrollAreaTopPadding();\n      return;\n    } // console.log('currPos', currPos);\n\n\n    const yScrollPos = currPos.y * -1; // NOTE: currPos is x and y, and y is negative as the user scrolls down\n    // calculate the max we can scroll (how much taller the product area is than the contact area - 20px for extra bottom padding)\n\n    const maxScrollHeight = productContentAreaRect.height - contactFormScrollableAreaInnerRect.height - stickyScrollExtraBottomPadding; // console.log('maxScrollHeight', maxScrollHeight);\n\n    let updatedScrollAreaTopPadding = yScrollPos - topAreaHeight;\n\n    if (updatedScrollAreaTopPadding > maxScrollHeight) {\n      updatedScrollAreaTopPadding = maxScrollHeight;\n    }\n\n    contactFormScrollableArea.style['padding-top'] = `${updatedScrollAreaTopPadding}px`; // console.log('Setting contactformscrollablearea padding to', updatedScrollAreaTopPadding);\n  });\n\n  const resetScrollAreaTopPadding = () => {\n    var contactFormScrollableArea = document.querySelector('#contactFormScrollableArea');\n\n    if (contactFormScrollableArea) {\n      contactFormScrollableArea.style['padding-top'] = `0px`;\n    }\n  };\n\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(CONTACT_FORM_QUERY, {});\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 10\n      }\n    }); // NOTE:: could show loading indicator here\n  }\n\n  if (error) return /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 20\n    }\n  }, \"Error loading contact details\");\n  if (!data.options.globalOptions) return /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 42\n    }\n  }, \"Error loading contact data\"); // console.log('product_details', props.product_details);\n\n  const tabDefinitions = [{\n    formId: data.options.globalOptions.tab1FormId,\n    tabTitle: data.options.globalOptions.tab1Title,\n    internalHeader: data.options.globalOptions.tab1InnerHeading\n  }, {\n    formId: data.options.globalOptions.tab2FormId,\n    tabTitle: data.options.globalOptions.tab2Title,\n    internalHeader: data.options.globalOptions.tab2InnerHeading\n  }];\n\n  const backClicked = () => {\n    props.GoBack();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `product-body`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(SEO, Object.assign({}, props.seo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 4\n    }\n  })), props.showGoBackToProductsLink ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: 'product-body__back-button',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: `link-button no-decoration arrow-link --back`,\n    onClick: backClicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ArrowNoStem, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }, \"Back to Search\")))))) : /*#__PURE__*/React.createElement(React.Fragment, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container product-body__main-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"productContentArea\",\n    className: \"col col-12 col-lg-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }, props.name), props.price && props.price !== \"$0.00\" ? /*#__PURE__*/React.createElement(\"h6\", {\n    className: `${mainContainer}__price`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 8\n    }\n  }, \"Starting at \", props.price) : /*#__PURE__*/React.createElement(React.Fragment, null), props.image ? /*#__PURE__*/React.createElement(\"img\", {\n    className: `${mainContainer}__product-image`,\n    src: props.image.mediaItemUrl,\n    alt: props.image.altText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 8\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: `${mainContainer}__description`,\n    dangerouslySetInnerHTML: {\n      __html: props.description\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }\n  }), props.product_details && (props.product_details.specs != null || props.product_details.insights != null || props.product_details.compatibility != null) ? /*#__PURE__*/React.createElement(\"div\", {\n    className: `${mainContainer}__product-tabs`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(ProductTabs, {\n    productDetails: props.product_details,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  })) : /*#__PURE__*/React.createElement(React.Fragment, null), props.resource_listing && props.resource_listing.resourceListing && props.resource_listing.resourceListing.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: `${mainContainer}__resources`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(ResourceListing, Object.assign({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 8\n    }\n  }))) : /*#__PURE__*/React.createElement(React.Fragment, null), props.crossSell && props.crossSell.edges.count > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: `${mainContainer}__similar-products`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(ProductListing, Object.assign({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 9\n    }\n  }))) : /*#__PURE__*/React.createElement(React.Fragment, null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col col-12 col-lg-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col col-12 col-lg-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"contactFormScrollableArea\",\n    className: \"contact-form-scrollable-area\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"contactFormScrollableAreaInner\",\n    className: \"contact-form-scrollable-area__inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(ContactForm, {\n    tabDefinitions: tabDefinitions,\n    forceSingleColumn: true,\n    forceSplitTabWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }\n  })))))), props.resourcesCta && props.resourcesCta.resources ? /*#__PURE__*/React.createElement(ResourcesCTA, {\n    heading: props.resourcesCta.heading,\n    resources: props.resourcesCta.resources,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 5\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null));\n};\n\nProductBody.propTypes = {\n  title: PropTypes.string,\n  showGoBackToProductsLink: PropTypes.bool,\n  GoBack: PropTypes.func\n};\nexport default ProductBody;","map":{"version":3,"sources":["C:/Users/phil/OneDrive/Documents/reliant/code/narwhal-digital-reliant-wp/src/templates/ProductDetail/ProductBody.js"],"names":["React","useQuery","useScrollPosition","gql","PropTypes","SEO","ArrowNoStem","ContactForm","ProductListing","ProductTabs","ResourceListing","ResourcesCTA","Variables","ProductBody","props","topAreaHeight","stickyScrollExtraBottomPadding","mainContainer","CONTACT_FORM_QUERY","prevPos","currPos","window","innerWidth","breakpointLarge","resetScrollAreaTopPadding","productContentArea","document","querySelector","contactFormScrollableArea","contactFormScrollableAreaInner","console","warn","productContentAreaRect","getBoundingClientRect","contactFormScrollableAreaInnerRect","height","innerHeight","yScrollPos","y","maxScrollHeight","updatedScrollAreaTopPadding","style","loading","error","data","options","globalOptions","tabDefinitions","formId","tab1FormId","tabTitle","tab1Title","internalHeader","tab1InnerHeading","tab2FormId","tab2Title","tab2InnerHeading","backClicked","GoBack","seo","showGoBackToProductsLink","name","price","image","mediaItemUrl","altText","__html","description","product_details","specs","insights","compatibility","resource_listing","resourceListing","length","crossSell","edges","count","resourcesCta","resources","heading","propTypes","title","string","bool","func"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,SAASC,iBAAT,QAAkC,6BAAlC;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,GAAP,MAAgB,sBAAhB;AACA,OAAOC,WAAP,MAAwB,iCAAxB;AACA,OAAOC,WAAP,MAAwB,8CAAxB;AACA,OAAOC,cAAP,MAA2B,iCAA3B;AACA,OAAOC,WAAP,MAAwB,8BAAxB;AACA,OAAOC,eAAP,MAA4B,kCAA5B;AACA,OAAOC,YAAP,MAAyB,+CAAzB;AACA,OAAOC,SAAP,MAAsB,0CAAtB;;AAEA,MAAMC,WAAW,GAAGC,KAAK,IAAI;AAC5B,QAAMC,aAAa,GAAG,GAAtB,CAD4B,CACD;;AAC3B,QAAMC,8BAA8B,GAAG,EAAvC;AAEA,QAAMC,aAAa,GAAG,8BAAtB;AAEA,QAAMC,kBAAkB,GAAGf,GAAI;;;;;;;;;;;;;EAA/B,CAN4B,CAqB5B;;AACAD,EAAAA,iBAAiB,CAAC,CAAC;AAAEiB,IAAAA,OAAF;AAAWC,IAAAA;AAAX,GAAD,KAAyB;AAG1C;AACA,QAAIC,MAAM,CAACC,UAAP,IAAqBV,SAAS,CAACW,eAAnC,EAAoD;AACnDC,MAAAA,yBAAyB;AACzB;AACA;;AAED,UAAMC,kBAAkB,GAAGC,QAAQ,CAACC,aAAT,CAAuB,qBAAvB,CAA3B;AACA,UAAMC,yBAAyB,GAAGF,QAAQ,CAACC,aAAT,CAAuB,4BAAvB,CAAlC;AACA,QAAIE,8BAA8B,GAAGH,QAAQ,CAACC,aAAT,CAAuB,iCAAvB,CAArC;;AAEA,QAAI,CAACC,yBAAD,IAA8B,CAACH,kBAA/B,IAAqD,CAACI,8BAA1D,EAA0F;AACzFC,MAAAA,OAAO,CAACC,IAAR,CAAa,yDAAb;AACA;AACA;;AAED,UAAMC,sBAAsB,GAAGP,kBAAkB,CAACQ,qBAAnB,EAA/B,CAlB0C,CAmB1C;;AACA,UAAMC,kCAAkC,GAAGL,8BAA8B,CAACI,qBAA/B,EAA3C,CApB0C,CAsB1C;;AACA,QAAIC,kCAAkC,CAACC,MAAnC,IAA6CH,sBAAsB,CAACG,MAAxE,EAAgF;AAC/EX,MAAAA,yBAAyB;AACzB;AACA,KA1ByC,CA4B1C;AACA;;;AACA,QAAIH,MAAM,CAACe,WAAP,IAAsBF,kCAAkC,CAACC,MAAnC,GAA4CpB,aAAtE,EAAqF;AACpFS,MAAAA,yBAAyB;AACzB;AACA,KAjCyC,CAmC1C;;;AACA,UAAMa,UAAU,GAAGjB,OAAO,CAACkB,CAAR,GAAY,CAAC,CAAhC,CApC0C,CAoCP;AAEnC;;AACA,UAAMC,eAAe,GAAGP,sBAAsB,CAACG,MAAvB,GAAgCD,kCAAkC,CAACC,MAAnE,GAA4EnB,8BAApG,CAvC0C,CAwC1C;;AAEA,QAAIwB,2BAA2B,GAAGH,UAAU,GAAGtB,aAA/C;;AACA,QAAIyB,2BAA2B,GAAGD,eAAlC,EAAmD;AAClDC,MAAAA,2BAA2B,GAAGD,eAA9B;AACA;;AACDX,IAAAA,yBAAyB,CAACa,KAA1B,CAAgC,aAAhC,IAAkD,GAAED,2BAA4B,IAAhF,CA9C0C,CAgD1C;AACA,GAjDgB,CAAjB;;AAmDA,QAAMhB,yBAAyB,GAAG,MAAM;AACvC,QAAII,yBAAyB,GAAGF,QAAQ,CAACC,aAAT,CAAuB,4BAAvB,CAAhC;;AACA,QAAIC,yBAAJ,EAA+B;AAC9BA,MAAAA,yBAAyB,CAACa,KAA1B,CAAgC,aAAhC,IAAkD,KAAlD;AACA;AACD,GALD;;AAOA,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,KAAX;AAAkBC,IAAAA;AAAlB,MAA2B3C,QAAQ,CAACiB,kBAAD,EAAqB,EAArB,CAAzC;;AACA,MAAIwB,OAAJ,EAAa;AACZ,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP,CADY,CACI;AAChB;;AACD,MAAIC,KAAJ,EAAW,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAAP;AACX,MAAI,CAACC,IAAI,CAACC,OAAL,CAAaC,aAAlB,EAAiC,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAAP,CArFL,CAuF5B;;AAEA,QAAMC,cAAc,GAAG,CACtB;AACCC,IAAAA,MAAM,EAAEJ,IAAI,CAACC,OAAL,CAAaC,aAAb,CAA2BG,UADpC;AAECC,IAAAA,QAAQ,EAAEN,IAAI,CAACC,OAAL,CAAaC,aAAb,CAA2BK,SAFtC;AAGCC,IAAAA,cAAc,EAAER,IAAI,CAACC,OAAL,CAAaC,aAAb,CAA2BO;AAH5C,GADsB,EAMtB;AACCL,IAAAA,MAAM,EAAEJ,IAAI,CAACC,OAAL,CAAaC,aAAb,CAA2BQ,UADpC;AAECJ,IAAAA,QAAQ,EAAEN,IAAI,CAACC,OAAL,CAAaC,aAAb,CAA2BS,SAFtC;AAGCH,IAAAA,cAAc,EAAER,IAAI,CAACC,OAAL,CAAaC,aAAb,CAA2BU;AAH5C,GANsB,CAAvB;;AAaA,QAAMC,WAAW,GAAG,MAAM;AACzB3C,IAAAA,KAAK,CAAC4C,MAAN;AACA,GAFD;;AAIA,sBACC;AAAK,IAAA,SAAS,EAAG,cAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,GAAD,oBAAS5C,KAAK,CAAC6C,GAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADD,EAGG7C,KAAK,CAAC8C,wBAAN,gBACD;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,SAAS,EAAE,2BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAQ,IAAA,SAAS,EAAG,6CAApB;AACC,IAAA,OAAO,EAAEH,WADV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHF,CADD,CADD,CADD,CADD,CADC,gBAeD,yCAlBF,eAqBC;AAAK,IAAA,SAAS,EAAC,wCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,EAAE,EAAC,oBAAR;AAA6B,IAAA,SAAS,EAAC,qBAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAK3C,KAAK,CAAC+C,IAAX,CADD,EAEG/C,KAAK,CAACgD,KAAN,IAAehD,KAAK,CAACgD,KAAN,KAAgB,OAA/B,gBACD;AAAI,IAAA,SAAS,EAAG,GAAE7C,aAAc,SAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAuDH,KAAK,CAACgD,KAA7D,CADC,gBAGD,yCALF,EAOGhD,KAAK,CAACiD,KAAN,gBACD;AAAK,IAAA,SAAS,EAAG,GAAE9C,aAAc,iBAAjC;AACC,IAAA,GAAG,EAAEH,KAAK,CAACiD,KAAN,CAAYC,YADlB;AAEC,IAAA,GAAG,EAAElD,KAAK,CAACiD,KAAN,CAAYE,OAFlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADC,gBAKD,yCAZF,eAcC;AAAK,IAAA,SAAS,EAAG,GAAEhD,aAAc,eAAjC;AACC,IAAA,uBAAuB,EAAE;AAACiD,MAAAA,MAAM,EAAEpD,KAAK,CAACqD;AAAf,KAD1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAdD,EAgBGrD,KAAK,CAACsD,eAAN,KACAtD,KAAK,CAACsD,eAAN,CAAsBC,KAAtB,IAA+B,IAA/B,IACDvD,KAAK,CAACsD,eAAN,CAAsBE,QAAtB,IAAkC,IADjC,IAEDxD,KAAK,CAACsD,eAAN,CAAsBG,aAAtB,IAAuC,IAHtC,iBAID;AAAK,IAAA,SAAS,EAAG,GAAEtD,aAAc,gBAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,WAAD;AAAa,IAAA,cAAc,EAAEH,KAAK,CAACsD,eAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CAJC,gBAQD,yCAxBF,EA0BKtD,KAAK,CAAC0D,gBAAN,IAA0B1D,KAAK,CAAC0D,gBAAN,CAAuBC,eAAjD,IAAoE3D,KAAK,CAAC0D,gBAAN,CAAuBC,eAAvB,CAAuCC,MAAvC,GAAgD,CAAtH,gBACD;AAAK,IAAA,SAAS,EAAG,GAAEzD,aAAc,aAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,eAAD,oBAAqBH,KAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADA,CADC,gBAKD,yCA/BF,EAiCKA,KAAK,CAAC6D,SAAN,IAAmB7D,KAAK,CAAC6D,SAAN,CAAgBC,KAAhB,CAAsBC,KAAtB,GAA8B,CAAnD,gBACD;AAAK,IAAA,SAAS,EAAG,GAAE5D,aAAc,oBAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,cAAD,oBAAoBH,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADD,CADC,gBAKD,yCAtCF,CADD,eA0CC;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA1CD,eA4CC;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,EAAE,EAAC,2BAAR;AAAoC,IAAA,SAAS,EAAC,8BAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC;AAAK,IAAA,EAAE,EAAC,gCAAR;AAAyC,IAAA,SAAS,EAAC,qCAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,WAAD;AAAa,IAAA,cAAc,EAAEiC,cAA7B;AACC,IAAA,iBAAiB,EAAE,IADpB;AAEC,IAAA,kBAAkB,EAAE,IAFrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CADD,CADD,CA5CD,CADD,CArBD,EA6EIjC,KAAK,CAACgE,YAAN,IAAsBhE,KAAK,CAACgE,YAAN,CAAmBC,SAA1C,gBACD,oBAAC,YAAD;AAAc,IAAA,OAAO,EAAEjE,KAAK,CAACgE,YAAN,CAAmBE,OAA1C;AACC,IAAA,SAAS,EAAElE,KAAK,CAACgE,YAAN,CAAmBC,SAD/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADC,gBAID,yCAjFF,CADD;AAsFA,CAhMD;;AAkMAlE,WAAW,CAACoE,SAAZ,GAAwB;AACvBC,EAAAA,KAAK,EAAE9E,SAAS,CAAC+E,MADM;AAEvBvB,EAAAA,wBAAwB,EAAExD,SAAS,CAACgF,IAFb;AAGvB1B,EAAAA,MAAM,EAAEtD,SAAS,CAACiF;AAHK,CAAxB;AAMA,eAAexE,WAAf","sourcesContent":["import React from 'react';\nimport { useQuery } from '@apollo/react-hooks';\nimport { useScrollPosition } from '@n8tb1t/use-scroll-position';\nimport gql from 'graphql-tag';\nimport PropTypes from 'prop-types';\nimport SEO from '../../components/SEO';\nimport ArrowNoStem from '../../assets/svgs/arrow-no-stem';\nimport ContactForm from '../../components/FlexibleContent/ContactForm';\nimport ProductListing from '../../components/ProductListing';\nimport ProductTabs from '../../components/ProductTabs';\nimport ResourceListing from '../../components/ResourceListing';\nimport ResourcesCTA from '../../components/FlexibleContent/ResourcesCTA';\nimport Variables from '../../assets/scss/config/_variables.scss'\n\nconst ProductBody = props => {\n\tconst topAreaHeight = 150; // top area height used for knowing when to sticky scroll\n\tconst stickyScrollExtraBottomPadding = 20;\n\n\tconst mainContainer = 'product-body__main-container';\n\n\tconst CONTACT_FORM_QUERY = gql`\n\t\tquery CONTACT_FORM_QUERY {\n\t\t\toptions {\n\t\t\t\tglobalOptions {\n\t\t\t\t\ttab1Title\n\t\t\t\t\ttab1InnerHeading\n\t\t\t\t\ttab1FormId\n\t\t\t\t\ttab2Title\n\t\t\t\t\ttab2InnerHeading\n\t\t\t\t\ttab2FormId\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t`;\n\n\t// making the contact form sticky is done by adding a top-padding to contactFormScrollableArea\n\tuseScrollPosition(({ prevPos, currPos}) => {\n\n\n\t\t// we dont want to have sticky scrolling if on mobile\n\t\tif (window.innerWidth <= Variables.breakpointLarge) {\n\t\t\tresetScrollAreaTopPadding();\n\t\t\treturn;\n\t\t}\n\n\t\tconst productContentArea = document.querySelector('#productContentArea');\n\t\tconst contactFormScrollableArea = document.querySelector('#contactFormScrollableArea');\n\t\tvar contactFormScrollableAreaInner = document.querySelector('#contactFormScrollableAreaInner');\n\n\t\tif (!contactFormScrollableArea || !productContentArea || !contactFormScrollableAreaInner) {\n\t\t\tconsole.warn('Could not find divs needed to make contact form sticky!');\n\t\t\treturn;\n\t\t}\n\n\t\tconst productContentAreaRect = productContentArea.getBoundingClientRect();\n\t\t// const contactFormScrollableAreaRect = contactFormScrollableArea.getBoundingClientRect();\n\t\tconst contactFormScrollableAreaInnerRect = contactFormScrollableAreaInner.getBoundingClientRect();\n\n\t\t// if the contact form is taller than the product area then don't scroll\n\t\tif (contactFormScrollableAreaInnerRect.height >= productContentAreaRect.height) {\n\t\t\tresetScrollAreaTopPadding();\n\t\t\treturn;\n\t\t}\n\n\t\t// we don't want to have sticky scroll if form is taller than visible area\n\t\t// console.log(`window.innerHeight: ${window.innerHeight}, contactFormScrollableAreaInnerRect + topAreaHeight: ${(contactFormScrollableAreaInnerRect.height + topAreaHeight)}`);\n\t\tif (window.innerHeight <= contactFormScrollableAreaInnerRect.height + topAreaHeight) {\n\t\t\tresetScrollAreaTopPadding();\n\t\t\treturn;\n\t\t}\n\n\t\t// console.log('currPos', currPos);\n\t\tconst yScrollPos = currPos.y * -1; // NOTE: currPos is x and y, and y is negative as the user scrolls down\n\n\t\t// calculate the max we can scroll (how much taller the product area is than the contact area - 20px for extra bottom padding)\n\t\tconst maxScrollHeight = productContentAreaRect.height - contactFormScrollableAreaInnerRect.height - stickyScrollExtraBottomPadding;\n\t\t// console.log('maxScrollHeight', maxScrollHeight);\n\n\t\tlet updatedScrollAreaTopPadding = yScrollPos - topAreaHeight;\n\t\tif (updatedScrollAreaTopPadding > maxScrollHeight) {\n\t\t\tupdatedScrollAreaTopPadding = maxScrollHeight;\n\t\t}\n\t\tcontactFormScrollableArea.style['padding-top'] = `${updatedScrollAreaTopPadding}px`;\n\n\t\t// console.log('Setting contactformscrollablearea padding to', updatedScrollAreaTopPadding);\n\t});\n\n\tconst resetScrollAreaTopPadding = () => {\n\t\tvar contactFormScrollableArea = document.querySelector('#contactFormScrollableArea');\n\t\tif (contactFormScrollableArea) {\n\t\t\tcontactFormScrollableArea.style['padding-top'] = `0px`;\n\t\t}\n\t}\n\n\tconst { loading, error, data } = useQuery(CONTACT_FORM_QUERY, {});\n\tif (loading) {\n\t\treturn <p></p>; // NOTE:: could show loading indicator here\n\t}\n\tif (error) return <p>Error loading contact details</p>;\n\tif (!data.options.globalOptions) return <p>Error loading contact data</p>;\n\n\t// console.log('product_details', props.product_details);\n\n\tconst tabDefinitions = [\n\t\t{\n\t\t\tformId: data.options.globalOptions.tab1FormId,\n\t\t\ttabTitle: data.options.globalOptions.tab1Title,\n\t\t\tinternalHeader: data.options.globalOptions.tab1InnerHeading\n\t\t},\n\t\t{\n\t\t\tformId: data.options.globalOptions.tab2FormId,\n\t\t\ttabTitle: data.options.globalOptions.tab2Title,\n\t\t\tinternalHeader: data.options.globalOptions.tab2InnerHeading\n\t\t}\n\t];\n\n\tconst backClicked = () => {\n\t\tprops.GoBack();\n\t}\n\n\treturn (\n\t\t<div className={`product-body`}>\n\t\t\t<SEO {...props.seo} />\n\n\t\t\t{ props.showGoBackToProductsLink ?\n\t\t\t\t<div className=\"container\">\n\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t\t<div className=\"col-12\">\n\t\t\t\t\t\t\t<div className={'product-body__back-button'}>\n\t\t\t\t\t\t\t\t<button className={`link-button no-decoration arrow-link --back`}\n\t\t\t\t\t\t\t\t\tonClick={backClicked}>\n\t\t\t\t\t\t\t\t\t\t<ArrowNoStem />\n\t\t\t\t\t\t\t\t\t\t<span>Back to Search</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t:\n\t\t\t\t<></>\n\t\t\t}\n\n\t\t\t<div className=\"container product-body__main-container\">\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div id=\"productContentArea\" className=\"col col-12 col-lg-6\">\n\t\t\t\t\t\t<h3>{props.name}</h3>\n\t\t\t\t\t\t{ props.price && props.price !== \"$0.00\" ?\n\t\t\t\t\t\t\t<h6 className={`${mainContainer}__price`}>Starting at {props.price}</h6>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ props.image ?\n\t\t\t\t\t\t\t<img className={`${mainContainer}__product-image`}\n\t\t\t\t\t\t\t\tsrc={props.image.mediaItemUrl}\n\t\t\t\t\t\t\t\talt={props.image.altText} />\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<div className={`${mainContainer}__description`}\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{__html: props.description}} />\n\t\t\t\t\t\t{ props.product_details &&\n\t\t\t\t\t\t\t(props.product_details.specs != null ||\n\t\t\t\t\t\t\tprops.product_details.insights != null ||\n\t\t\t\t\t\t\tprops.product_details.compatibility != null) ?\n\t\t\t\t\t\t\t<div className={`${mainContainer}__product-tabs`}>\n\t\t\t\t\t\t\t\t<ProductTabs productDetails={props.product_details} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ ( props.resource_listing && props.resource_listing.resourceListing && props.resource_listing.resourceListing.length > 0 ) ?\n\t\t\t\t\t\t\t<div className={`${mainContainer}__resources`}>\n\t\t\t\t\t\t\t<ResourceListing {...props} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ ( props.crossSell && props.crossSell.edges.count > 0 ) ?\n\t\t\t\t\t\t\t<div className={`${mainContainer}__similar-products`}>\n\t\t\t\t\t\t\t\t<ProductListing {...props} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col col-12 col-lg-1\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col col-12 col-lg-5\">\n\t\t\t\t\t\t<div id=\"contactFormScrollableArea\" className=\"contact-form-scrollable-area\">\n\t\t\t\t\t\t\t<div id=\"contactFormScrollableAreaInner\" className=\"contact-form-scrollable-area__inner\">\n\t\t\t\t\t\t\t\t<ContactForm tabDefinitions={tabDefinitions}\n\t\t\t\t\t\t\t\t\tforceSingleColumn={true}\n\t\t\t\t\t\t\t\t\tforceSplitTabWidth={true} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{ (props.resourcesCta && props.resourcesCta.resources) ?\n\t\t\t\t<ResourcesCTA heading={props.resourcesCta.heading}\n\t\t\t\t\tresources={props.resourcesCta.resources} />\n\t\t\t\t:\n\t\t\t\t<></>\n\t\t\t}\n\t\t</div>\n\t);\n}\n\nProductBody.propTypes = {\n\ttitle: PropTypes.string,\n\tshowGoBackToProductsLink: PropTypes.bool,\n\tGoBack: PropTypes.func\n}\n\nexport default ProductBody;\n"]},"metadata":{},"sourceType":"module"}