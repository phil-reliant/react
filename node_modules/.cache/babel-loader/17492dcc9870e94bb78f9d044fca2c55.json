{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\phil\\\\OneDrive\\\\Documents\\\\reliant\\\\code\\\\narwhal-digital-reliant-wp\\\\src\\\\components\\\\RecentPostsForCategory\\\\index.js\";\nimport React from 'react';\nimport { useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport ErrorBoundary from '../ErrorBoundary';\nimport ResourcesCTA from '../FlexibleContent/ResourcesCTA';\n\nconst RecentPostsForCategory = ({\n  heading,\n  category,\n  postIdToExclude\n}) => {\n  // console.log('category', category);\n  // console.log('postIdToExclude', postIdToExclude);\n  // query for the first 2 items of a given category excluding the current post\n  const RECENT_POSTS_FOR_CATEGORY_QUERY = gql`\n\t\tquery RECENT_POSTS_FOR_CATEGORY_QUERY($category: String, $postIdToExclude: [ID]) {\n\t\t\tposts(where: {categoryName: $category, notIn: $postIdToExclude}, first: 2) {\n\t\t\t\tnodes {\n\t\t\t\t\tid\n\t\t\t\t\tpostId\n\t\t\t\t\ttitle\n\t\t\t\t\tlink\n\t\t\t\t\texcerpt\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t`;\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(RECENT_POSTS_FOR_CATEGORY_QUERY, {\n    variables: {\n      category: category,\n      postIdToExclude: postIdToExclude\n    }\n  });\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 10\n      }\n    });\n  }\n\n  if (error) {\n    console.error('Error loading recent posts for category', error);\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 10\n      }\n    }, \"Error loading recent posts for category\");\n  }\n\n  if (!data.posts.nodes) return /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 32\n    }\n  }, \"Error loading recent posts for category data\");\n  return /*#__PURE__*/React.createElement(ErrorBoundary, {\n    message: `Unable to load recent posts for category`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(ResourcesCTA, {\n    heading: heading,\n    resources: data.posts.nodes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 4\n    }\n  }));\n};\n\nexport default RecentPostsForCategory;","map":{"version":3,"sources":["C:/Users/phil/OneDrive/Documents/reliant/code/narwhal-digital-reliant-wp/src/components/RecentPostsForCategory/index.js"],"names":["React","useQuery","gql","ErrorBoundary","ResourcesCTA","RecentPostsForCategory","heading","category","postIdToExclude","RECENT_POSTS_FOR_CATEGORY_QUERY","loading","error","data","variables","console","posts","nodes"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AACA,OAAOC,YAAP,MAAyB,iCAAzB;;AAEA,MAAMC,sBAAsB,GAAG,CAAC;AAAEC,EAAAA,OAAF;AAAWC,EAAAA,QAAX;AAAqBC,EAAAA;AAArB,CAAD,KAA4C;AAC1E;AACA;AAEA;AACA,QAAMC,+BAA+B,GAAGP,GAAI;;;;;;;;;;;;EAA5C;AAcA,QAAM;AAAEQ,IAAAA,OAAF;AAAWC,IAAAA,KAAX;AAAkBC,IAAAA;AAAlB,MAA2BX,QAAQ,CAACQ,+BAAD,EAAkC;AAC1EI,IAAAA,SAAS,EAAE;AACVN,MAAAA,QAAQ,EAAEA,QADA;AAEVC,MAAAA,eAAe,EAAEA;AAFP;AAD+D,GAAlC,CAAzC;;AAOA,MAAIE,OAAJ,EAAa;AACZ,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACA;;AACD,MAAIC,KAAJ,EAAW;AACVG,IAAAA,OAAO,CAACH,KAAR,CAAc,yCAAd,EAAyDA,KAAzD;AACA,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iDAAP;AACA;;AACD,MAAI,CAACC,IAAI,CAACG,KAAL,CAAWC,KAAhB,EAAuB,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAAP;AAEvB,sBACC,oBAAC,aAAD;AAAe,IAAA,OAAO,EAAG,0CAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,YAAD;AAAc,IAAA,OAAO,EAAEV,OAAvB;AAAgC,IAAA,SAAS,EAAEM,IAAI,CAACG,KAAL,CAAWC,KAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CADD;AAKA,CAxCD;;AA0CA,eAAeX,sBAAf","sourcesContent":["import React from 'react';\nimport { useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport ErrorBoundary from '../ErrorBoundary';\nimport ResourcesCTA from '../FlexibleContent/ResourcesCTA';\n\nconst RecentPostsForCategory = ({ heading, category, postIdToExclude }) => {\n\t// console.log('category', category);\n\t// console.log('postIdToExclude', postIdToExclude);\n\n\t// query for the first 2 items of a given category excluding the current post\n\tconst RECENT_POSTS_FOR_CATEGORY_QUERY = gql`\n\t\tquery RECENT_POSTS_FOR_CATEGORY_QUERY($category: String, $postIdToExclude: [ID]) {\n\t\t\tposts(where: {categoryName: $category, notIn: $postIdToExclude}, first: 2) {\n\t\t\t\tnodes {\n\t\t\t\t\tid\n\t\t\t\t\tpostId\n\t\t\t\t\ttitle\n\t\t\t\t\tlink\n\t\t\t\t\texcerpt\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t`;\n\n\tconst { loading, error, data } = useQuery(RECENT_POSTS_FOR_CATEGORY_QUERY, {\n\t\tvariables: {\n\t\t\tcategory: category,\n\t\t\tpostIdToExclude: postIdToExclude\n\t\t}\n\t});\n\n\tif (loading) {\n\t\treturn <p></p>\n\t}\n\tif (error) {\n\t\tconsole.error('Error loading recent posts for category', error);\n\t\treturn <p>Error loading recent posts for category</p>;\n\t}\n\tif (!data.posts.nodes) return <p>Error loading recent posts for category data</p>;\n\n\treturn (\n\t\t<ErrorBoundary message={`Unable to load recent posts for category`}>\n\t\t\t<ResourcesCTA heading={heading} resources={data.posts.nodes} />\n\t\t</ErrorBoundary>\n\t)\n}\n\nexport default RecentPostsForCategory;\n"]},"metadata":{},"sourceType":"module"}