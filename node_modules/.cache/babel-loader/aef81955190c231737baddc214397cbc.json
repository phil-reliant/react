{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\phil\\\\OneDrive\\\\Documents\\\\reliant\\\\code\\\\narwhal-digital-reliant-wp\\\\src\\\\components\\\\Header\\\\NavMenu.js\";\nimport React, { useState, useRef, createRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { MakeRelativePath, InternalOrExternalLink } from '../../utils/UrlUtils';\nimport gsap from 'gsap';\nimport RightArrow from '../../assets/svgs/right-arrow.js';\nimport PlusSign from '../../assets/svgs/plus-sign.js';\n\nconst NavMenu = ({\n  menuItems,\n  doToggleMenuIfMobile\n}) => {\n  const [activeMenu, setActiveMenu] = useState(null);\n  const menuRef = useRef([...Array(menuItems.nodes.length)].map(() => createRef()));\n  const containerRef = useRef(null);\n  useEffect(() => {\n    gsap.to(containerRef.current, {\n      duration: 1,\n      opacity: 1\n    });\n  });\n  if (!menuItems.nodes.length) return ``;\n\n  const RenderSubMenu = (menuItems, isActive, menuIndex) => {\n    if (!menuItems.edges.length) return ``;\n    const {\n      edges\n    } = menuItems;\n    const activeClass = isActive ? `active` : ``;\n    const subMenuMarkup = edges.map(({\n      node\n    }, index) => {\n      const classes = node.cssClasses.join(\" \");\n      const target = node.target || `_self`;\n      return /*#__PURE__*/React.createElement(\"li\", {\n        key: `submenu-item-${index}`,\n        className: `submenu__item\n\t\t\t\t\t\t${classes}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(InternalOrExternalLink, {\n        url: node.url,\n        target: target,\n        onClick: () => doToggleMenuIfMobile(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 7\n        }\n      }, node.label), /*#__PURE__*/React.createElement(RightArrow, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 7\n        }\n      })));\n    });\n    return /*#__PURE__*/React.createElement(\"ul\", {\n      ref: menuRef.current[menuIndex],\n      className: `submenu ${activeClass}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 4\n      }\n    }, subMenuMarkup);\n  };\n\n  const listItems = menuItems.nodes.map((item, index) => {\n    const classes = item.cssClasses.join(\" \");\n    const target = item.target || `_self`;\n    const hasChildren = !!item.childItems.edges.length;\n    const isActive = activeMenu === index;\n    const subMenu = RenderSubMenu(item.childItems, isActive, index);\n    const childrenClass = item.childItems.edges.length ? `--has-children` : ``;\n\n    const onSubClick = () => {\n      if (!isActive) {\n        if (activeMenu !== null) {\n          gsap.to(menuRef.current[activeMenu].current, {\n            duration: 0.25,\n            height: 0\n          });\n        }\n\n        setActiveMenu(index);\n        gsap.to(menuRef.current[index].current, {\n          duration: 0.25,\n          height: `auto`\n        });\n      } else {\n        setActiveMenu(null);\n        gsap.to(menuRef.current[index].current, {\n          duration: 0.25,\n          height: 0\n        });\n      }\n    };\n\n    const currPageClass = MakeRelativePath(item.url) === `${window.location.pathname}/` ? `--active` : ``;\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: `nav-menu-item-${index}`,\n      className: `nav-menu__item\n\t\t\t\t\t${childrenClass}\n\t\t\t\t\tnav-menu__item--${item.menuItemId}\n\t\t\t\t\t${classes}\n\t\t\t\t\t${currPageClass}\n\t\t\t\t\t${activeMenu === index ? `--open` : ``}\n\t\t\t\t`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 4\n      }\n    }, hasChildren ? /*#__PURE__*/React.createElement(\"button\", {\n      onClick: ev => {\n        if (window.innerWidth < 992) {\n          onSubClick();\n        } else {\n          ev.preventDefault();\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }\n    }, item.label), /*#__PURE__*/React.createElement(PlusSign, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }\n    })) : /*#__PURE__*/React.createElement(InternalOrExternalLink, {\n      url: item.url,\n      target: target,\n      onClick: () => doToggleMenuIfMobile(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 6\n      }\n    }, item.label), subMenu);\n  });\n  return listItems.length ? /*#__PURE__*/React.createElement(\"ul\", {\n    ref: containerRef,\n    className: `site-header__nav-menu`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 3\n    }\n  }, listItems) : ``;\n};\n\nNavMenu.propTypes = {\n  menuItems: PropTypes.object,\n  doToggleMenuIfMobile: PropTypes.func.isRequired\n};\nexport default NavMenu;","map":{"version":3,"sources":["C:/Users/phil/OneDrive/Documents/reliant/code/narwhal-digital-reliant-wp/src/components/Header/NavMenu.js"],"names":["React","useState","useRef","createRef","useEffect","PropTypes","MakeRelativePath","InternalOrExternalLink","gsap","RightArrow","PlusSign","NavMenu","menuItems","doToggleMenuIfMobile","activeMenu","setActiveMenu","menuRef","Array","nodes","length","map","containerRef","to","current","duration","opacity","RenderSubMenu","isActive","menuIndex","edges","activeClass","subMenuMarkup","node","index","classes","cssClasses","join","target","url","label","listItems","item","hasChildren","childItems","subMenu","childrenClass","onSubClick","height","currPageClass","window","location","pathname","menuItemId","ev","innerWidth","preventDefault","propTypes","object","func","isRequired"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,MAA1B,EAAkCC,SAAlC,EAA6CC,SAA7C,QAA8D,OAA9D;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,gBAAT,EAA2BC,sBAA3B,QAAyD,sBAAzD;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,UAAP,MAAuB,kCAAvB;AACA,OAAOC,QAAP,MAAqB,gCAArB;;AAEA,MAAMC,OAAO,GAAG,CAAC;AAAEC,EAAAA,SAAF;AAAaC,EAAAA;AAAb,CAAD,KAAwC;AACvD,QAAM,CAAEC,UAAF,EAAcC,aAAd,IAAgCd,QAAQ,CAAC,IAAD,CAA9C;AACA,QAAMe,OAAO,GAAGd,MAAM,CAAC,CAAC,GAAGe,KAAK,CAACL,SAAS,CAACM,KAAV,CAAgBC,MAAjB,CAAT,EAAmCC,GAAnC,CAAuC,MAAMjB,SAAS,EAAtD,CAAD,CAAtB;AACA,QAAMkB,YAAY,GAAGnB,MAAM,CAAC,IAAD,CAA3B;AAEAE,EAAAA,SAAS,CAAC,MAAM;AACfI,IAAAA,IAAI,CAACc,EAAL,CAAQD,YAAY,CAACE,OAArB,EAA8B;AAAEC,MAAAA,QAAQ,EAAE,CAAZ;AAAeC,MAAAA,OAAO,EAAE;AAAxB,KAA9B;AACA,GAFQ,CAAT;AAIA,MAAI,CAACb,SAAS,CAACM,KAAV,CAAgBC,MAArB,EAA6B,OAAQ,EAAR;;AAE7B,QAAMO,aAAa,GAAG,CAACd,SAAD,EAAYe,QAAZ,EAAsBC,SAAtB,KAAoC;AACzD,QAAI,CAAChB,SAAS,CAACiB,KAAV,CAAgBV,MAArB,EAA6B,OAAQ,EAAR;AAE7B,UAAM;AAAEU,MAAAA;AAAF,QAAYjB,SAAlB;AACA,UAAMkB,WAAW,GAAGH,QAAQ,GAAI,QAAJ,GAAe,EAA3C;AAEA,UAAMI,aAAa,GAAGF,KAAK,CAACT,GAAN,CAAU,CAAC;AAACY,MAAAA;AAAD,KAAD,EAASC,KAAT,KAAmB;AAClD,YAAMC,OAAO,GAAGF,IAAI,CAACG,UAAL,CAAgBC,IAAhB,CAAqB,GAArB,CAAhB;AACA,YAAMC,MAAM,GAAGL,IAAI,CAACK,MAAL,IAAgB,OAA/B;AAEA,0BACC;AACC,QAAA,GAAG,EAAG,gBAAeJ,KAAM,EAD5B;AAEC,QAAA,SAAS,EACP;QACCC,OAAQ,EAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAOC,oBAAC,sBAAD;AAAwB,QAAA,GAAG,EAAEF,IAAI,CAACM,GAAlC;AAAuC,QAAA,MAAM,EAAED,MAA/C;AAAuD,QAAA,OAAO,EAAE,MAAMxB,oBAAoB,EAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAOmB,IAAI,CAACO,KAAZ,CADD,eAEC,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFD,CAPD,CADD;AAcA,KAlBqB,CAAtB;AAoBA,wBACC;AACC,MAAA,GAAG,EAAEvB,OAAO,CAACO,OAAR,CAAgBK,SAAhB,CADN;AAEC,MAAA,SAAS,EAAG,WAAUE,WAAY,EAFnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIEC,aAJF,CADD;AAQA,GAlCD;;AAoCA,QAAMS,SAAS,GAAG5B,SAAS,CAACM,KAAV,CAAgBE,GAAhB,CAAoB,CAACqB,IAAD,EAAOR,KAAP,KAAiB;AACtD,UAAMC,OAAO,GAAGO,IAAI,CAACN,UAAL,CAAgBC,IAAhB,CAAqB,GAArB,CAAhB;AACA,UAAMC,MAAM,GAAGI,IAAI,CAACJ,MAAL,IAAgB,OAA/B;AACA,UAAMK,WAAW,GAAG,CAAC,CAACD,IAAI,CAACE,UAAL,CAAgBd,KAAhB,CAAsBV,MAA5C;AAEA,UAAMQ,QAAQ,GAAGb,UAAU,KAAKmB,KAAhC;AACA,UAAMW,OAAO,GAAGlB,aAAa,CAACe,IAAI,CAACE,UAAN,EAAkBhB,QAAlB,EAA4BM,KAA5B,CAA7B;AACA,UAAMY,aAAa,GAAGJ,IAAI,CAACE,UAAL,CAAgBd,KAAhB,CAAsBV,MAAtB,GAAgC,gBAAhC,GAAmD,EAAzE;;AAEA,UAAM2B,UAAU,GAAG,MAAM;AACxB,UAAI,CAACnB,QAAL,EAAe;AACd,YAAIb,UAAU,KAAK,IAAnB,EAAyB;AACxBN,UAAAA,IAAI,CAACc,EAAL,CAAQN,OAAO,CAACO,OAAR,CAAgBT,UAAhB,EAA4BS,OAApC,EAA6C;AAAEC,YAAAA,QAAQ,EAAE,IAAZ;AAAkBuB,YAAAA,MAAM,EAAE;AAA1B,WAA7C;AACA;;AAEDhC,QAAAA,aAAa,CAACkB,KAAD,CAAb;AACAzB,QAAAA,IAAI,CAACc,EAAL,CAAQN,OAAO,CAACO,OAAR,CAAgBU,KAAhB,EAAuBV,OAA/B,EAAwC;AAAEC,UAAAA,QAAQ,EAAE,IAAZ;AAAkBuB,UAAAA,MAAM,EAAG;AAA3B,SAAxC;AACA,OAPD,MAOO;AACNhC,QAAAA,aAAa,CAAC,IAAD,CAAb;AACAP,QAAAA,IAAI,CAACc,EAAL,CAAQN,OAAO,CAACO,OAAR,CAAgBU,KAAhB,EAAuBV,OAA/B,EAAwC;AAAEC,UAAAA,QAAQ,EAAE,IAAZ;AAAkBuB,UAAAA,MAAM,EAAE;AAA1B,SAAxC;AACA;AACD,KAZD;;AAcA,UAAMC,aAAa,GAAG1C,gBAAgB,CAACmC,IAAI,CAACH,GAAN,CAAhB,KAAgC,GAAEW,MAAM,CAACC,QAAP,CAAgBC,QAAS,GAA3D,GAAiE,UAAjE,GAA8E,EAApG;AAEA,wBACC;AACC,MAAA,GAAG,EAAG,iBAAgBlB,KAAM,EAD7B;AAEC,MAAA,SAAS,EAAG;OACTY,aAAc;uBACEJ,IAAI,CAACW,UAAW;OAChClB,OAAQ;OACRc,aAAc;OACdlC,UAAU,KAAKmB,KAAf,GAAwB,QAAxB,GAAmC,EAAE;KAPzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAWES,WAAW,gBACX;AACC,MAAA,OAAO,EAAGW,EAAD,IAAQ;AAChB,YAAIJ,MAAM,CAACK,UAAP,GAAoB,GAAxB,EAA6B;AAC5BR,UAAAA,UAAU;AACV,SAFD,MAEO;AACNO,UAAAA,EAAE,CAACE,cAAH;AACA;AACD,OAPF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAQC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAOd,IAAI,CAACF,KAAZ,CARD,eASC,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATD,CADW,gBAaX,oBAAC,sBAAD;AACC,MAAA,GAAG,EAAEE,IAAI,CAACH,GADX;AAEC,MAAA,MAAM,EAAED,MAFT;AAGC,MAAA,OAAO,EAAE,MAAMxB,oBAAoB,EAHpC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKE4B,IAAI,CAACF,KALP,CAxBF,EAgCEK,OAhCF,CADD;AAoCA,GA7DiB,CAAlB;AA+DA,SAAOJ,SAAS,CAACrB,MAAV,gBACN;AACC,IAAA,GAAG,EAAEE,YADN;AAEC,IAAA,SAAS,EAAG,uBAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIEmB,SAJF,CADM,GAQL,EARF;AASA,CAvHD;;AAyHA7B,OAAO,CAAC6C,SAAR,GAAoB;AACnB5C,EAAAA,SAAS,EAAEP,SAAS,CAACoD,MADF;AAEnB5C,EAAAA,oBAAoB,EAAER,SAAS,CAACqD,IAAV,CAAeC;AAFlB,CAApB;AAKA,eAAehD,OAAf","sourcesContent":["import React, { useState, useRef, createRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { MakeRelativePath, InternalOrExternalLink } from '../../utils/UrlUtils';\nimport gsap from 'gsap';\nimport RightArrow from '../../assets/svgs/right-arrow.js';\nimport PlusSign from '../../assets/svgs/plus-sign.js';\n\nconst NavMenu = ({ menuItems, doToggleMenuIfMobile}) => {\n\tconst [ activeMenu, setActiveMenu ] = useState(null);\n\tconst menuRef = useRef([...Array(menuItems.nodes.length)].map(() => createRef()));\n\tconst containerRef = useRef(null);\n\n\tuseEffect(() => {\n\t\tgsap.to(containerRef.current, { duration: 1, opacity: 1 })\n\t});\n\n\tif (!menuItems.nodes.length) return ``;\n\n\tconst RenderSubMenu = (menuItems, isActive, menuIndex) => {\n\t\tif (!menuItems.edges.length) return ``;\n\n\t\tconst { edges } = menuItems;\n\t\tconst activeClass = isActive ? `active` : ``;\n\n\t\tconst subMenuMarkup = edges.map(({node}, index) => {\n\t\t\tconst classes = node.cssClasses.join(\" \");\n\t\t\tconst target = node.target || `_self`;\n\n\t\t\treturn (\n\t\t\t\t<li\n\t\t\t\t\tkey={`submenu-item-${index}`}\n\t\t\t\t\tclassName={\n\t\t\t\t\t\t`submenu__item\n\t\t\t\t\t\t${classes}`\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<InternalOrExternalLink url={node.url} target={target} onClick={() => doToggleMenuIfMobile()}>\n\t\t\t\t\t\t<span>{node.label}</span>\n\t\t\t\t\t\t<RightArrow />\n\t\t\t\t\t</InternalOrExternalLink>\n\t\t\t\t</li>\n\t\t\t)\n\t\t});\n\n\t\treturn (\n\t\t\t<ul\n\t\t\t\tref={menuRef.current[menuIndex]}\n\t\t\t\tclassName={`submenu ${activeClass}`}\n\t\t\t>\n\t\t\t\t{subMenuMarkup}\n\t\t\t</ul>\n\t\t)\n\t}\n\n\tconst listItems = menuItems.nodes.map((item, index) => {\n\t\tconst classes = item.cssClasses.join(\" \");\n\t\tconst target = item.target || `_self`;\n\t\tconst hasChildren = !!item.childItems.edges.length;\n\n\t\tconst isActive = activeMenu === index;\n\t\tconst subMenu = RenderSubMenu(item.childItems, isActive, index);\n\t\tconst childrenClass = item.childItems.edges.length ? `--has-children` : ``;\n\n\t\tconst onSubClick = () => {\n\t\t\tif (!isActive) {\n\t\t\t\tif (activeMenu !== null) {\n\t\t\t\t\tgsap.to(menuRef.current[activeMenu].current, { duration: 0.25, height: 0 });\n\t\t\t\t}\n\n\t\t\t\tsetActiveMenu(index);\n\t\t\t\tgsap.to(menuRef.current[index].current, { duration: 0.25, height: `auto` });\n\t\t\t} else {\n\t\t\t\tsetActiveMenu(null);\n\t\t\t\tgsap.to(menuRef.current[index].current, { duration: 0.25, height: 0 });\n\t\t\t}\n\t\t}\n\n\t\tconst currPageClass = MakeRelativePath(item.url) === `${window.location.pathname}/` ? `--active` : ``;\n\n\t\treturn (\n\t\t\t<li\n\t\t\t\tkey={`nav-menu-item-${index}`}\n\t\t\t\tclassName={`nav-menu__item\n\t\t\t\t\t${childrenClass}\n\t\t\t\t\tnav-menu__item--${item.menuItemId}\n\t\t\t\t\t${classes}\n\t\t\t\t\t${currPageClass}\n\t\t\t\t\t${activeMenu === index ? `--open` : ``}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\thasChildren ?\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={(ev) => {\n\t\t\t\t\t\t\tif (window.innerWidth < 992) {\n\t\t\t\t\t\t\t\tonSubClick();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t<span>{item.label}</span>\n\t\t\t\t\t\t<PlusSign />\n\t\t\t\t\t</button>\n\t\t\t\t\t:\n\t\t\t\t\t<InternalOrExternalLink\n\t\t\t\t\t\turl={item.url}\n\t\t\t\t\t\ttarget={target}\n\t\t\t\t\t\tonClick={() => doToggleMenuIfMobile()}\n\t\t\t\t\t>\n\t\t\t\t\t\t{item.label}\n\t\t\t\t\t</InternalOrExternalLink>\n\t\t\t\t}\n\t\t\t\t{subMenu}\n\t\t\t</li>\n\t\t);\n\t});\n\n\treturn listItems.length ?\n\t\t<ul\n\t\t\tref={containerRef}\n\t\t\tclassName={`site-header__nav-menu`}\n\t\t>\n\t\t\t{listItems}\n\t\t</ul>\n\t\t:\n\t\t``;\n};\n\nNavMenu.propTypes = {\n\tmenuItems: PropTypes.object,\n\tdoToggleMenuIfMobile: PropTypes.func.isRequired\n}\n\nexport default NavMenu;\n"]},"metadata":{},"sourceType":"module"}