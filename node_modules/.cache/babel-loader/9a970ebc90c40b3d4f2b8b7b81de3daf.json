{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\phil\\\\OneDrive\\\\Documents\\\\reliant\\\\code\\\\narwhal-digital-reliant-wp\\\\src\\\\templates\\\\SinglePage\\\\index.js\";\nimport React from \"react\";\nimport PageBody from \"./PageBody\";\nimport Page404 from '../../pages/404';\nimport FLEX_CONTENT_QUERY from \"../../queries/FlexibleQuery\";\nimport SEO_QUERY_PARTIAL from \"../../queries/SEOQuery\";\nimport { useQuery } from '@apollo/react-hooks';\nimport ErrorBoundary from '../../components/ErrorBoundary';\nimport gql from 'graphql-tag';\nconst SINGLE_PAGE_QUERY = gql`\n    query SINGLE_PAGE_QUERY($slug: String!) {\n        pageBy(uri: $slug) {\n            title\n\t\t\t\t\t\tpageTemplate\n\t\t\t\t\t\turi\n            ${FLEX_CONTENT_QUERY('Page')}\n            ${SEO_QUERY_PARTIAL}\n        }\n    }\n`;\n\nconst SinglePage = props => {\n  const {\n    slug\n  } = props.match.params;\n  let route = slug;\n\n  if (!slug) {\n    route = `home`;\n  }\n\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(SINGLE_PAGE_QUERY, {\n    variables: {\n      slug: route\n    }\n  });\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        height: 100 + 'vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 10\n      }\n    });\n  }\n\n  if (error) {\n    console.error('SinglePage error', error);\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 10\n      }\n    }, \"Error loading SinglePage.\");\n  }\n\n  if (!data.pageBy) return /*#__PURE__*/React.createElement(Page404, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 27\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `single-page`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(ErrorBoundary, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(PageBody, Object.assign({}, data.pageBy, {\n    route: route,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }))));\n};\n\nexport default SinglePage;","map":{"version":3,"sources":["C:/Users/phil/OneDrive/Documents/reliant/code/narwhal-digital-reliant-wp/src/templates/SinglePage/index.js"],"names":["React","PageBody","Page404","FLEX_CONTENT_QUERY","SEO_QUERY_PARTIAL","useQuery","ErrorBoundary","gql","SINGLE_PAGE_QUERY","SinglePage","props","slug","match","params","route","loading","error","data","variables","height","console","pageBy"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,OAAP,MAAoB,iBAApB;AACA,OAAOC,kBAAP,MAA+B,6BAA/B;AACA,OAAOC,iBAAP,MAA8B,wBAA9B;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,OAAOC,aAAP,MAA0B,gCAA1B;AACA,OAAOC,GAAP,MAAgB,aAAhB;AAEA,MAAMC,iBAAiB,GAAGD,GAAI;;;;;;cAMhBJ,kBAAkB,CAAC,MAAD,CAAS;cAC3BC,iBAAkB;;;CAPhC;;AAYA,MAAMK,UAAU,GAAGC,KAAK,IAAI;AAC3B,QAAM;AAAEC,IAAAA;AAAF,MAAWD,KAAK,CAACE,KAAN,CAAYC,MAA7B;AACA,MAAIC,KAAK,GAAGH,IAAZ;;AAEA,MAAI,CAACA,IAAL,EAAW;AACVG,IAAAA,KAAK,GAAI,MAAT;AACA;;AAED,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,KAAX;AAAkBC,IAAAA;AAAlB,MAA2BZ,QAAQ,CAACG,iBAAD,EAAoB;AAC5DU,IAAAA,SAAS,EAAE;AAAEP,MAAAA,IAAI,EAAEG;AAAR;AADiD,GAApB,CAAzC;;AAIA,MAAIC,OAAJ,EAAa;AACZ,wBAAO;AAAG,MAAA,KAAK,EAAE;AAACI,QAAAA,MAAM,EAAE,MAAM;AAAf,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACA;;AACD,MAAIH,KAAJ,EAAW;AACVI,IAAAA,OAAO,CAACJ,KAAR,CAAc,kBAAd,EAAkCA,KAAlC;AACA,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAAP;AACA;;AACD,MAAI,CAACC,IAAI,CAACI,MAAV,EAAkB,oBAAO,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AAElB,sBACC;AAAK,IAAA,SAAS,EAAG,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACC,oBAAC,QAAD,oBAAcJ,IAAI,CAACI,MAAnB;AAA2B,IAAA,KAAK,EAAEP,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADD,CADD,CADD;AAOA,CA5BD;;AA8BA,eAAeL,UAAf","sourcesContent":["import React from \"react\";\nimport PageBody from \"./PageBody\";\nimport Page404 from '../../pages/404';\nimport FLEX_CONTENT_QUERY from \"../../queries/FlexibleQuery\";\nimport SEO_QUERY_PARTIAL from \"../../queries/SEOQuery\";\nimport { useQuery } from '@apollo/react-hooks';\nimport ErrorBoundary from '../../components/ErrorBoundary';\nimport gql from 'graphql-tag';\n\nconst SINGLE_PAGE_QUERY = gql`\n    query SINGLE_PAGE_QUERY($slug: String!) {\n        pageBy(uri: $slug) {\n            title\n\t\t\t\t\t\tpageTemplate\n\t\t\t\t\t\turi\n            ${FLEX_CONTENT_QUERY('Page')}\n            ${SEO_QUERY_PARTIAL}\n        }\n    }\n`;\n\nconst SinglePage = props => {\n\tconst { slug } = props.match.params;\n\tlet route = slug;\n\n\tif (!slug) {\n\t\troute = `home`;\n\t}\n\n\tconst { loading, error, data } = useQuery(SINGLE_PAGE_QUERY, {\n\t\tvariables: { slug: route }\n\t});\n\n\tif (loading) {\n\t\treturn <p style={{height: 100 + 'vh'}}></p>;\n\t}\n\tif (error) {\n\t\tconsole.error('SinglePage error', error);\n\t\treturn <p>Error loading SinglePage.</p>;\n\t}\n\tif (!data.pageBy) return <Page404 />;\n\n\treturn (\n\t\t<div className={`single-page`}>\n\t\t\t<ErrorBoundary>\n\t\t\t\t<PageBody {...data.pageBy} route={route} />\n\t\t\t</ErrorBoundary>\n\t\t</div>\n\t);\n}\n\nexport default SinglePage;\n"]},"metadata":{},"sourceType":"module"}