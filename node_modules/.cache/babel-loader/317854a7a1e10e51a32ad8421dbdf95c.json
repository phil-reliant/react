{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\phil\\\\OneDrive\\\\Documents\\\\reliant\\\\code\\\\narwhal-digital-reliant-wp\\\\src\\\\components\\\\LeadGenFormAndPanel\\\\StickyDrawerSide.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useScrollPosition } from '@n8tb1t/use-scroll-position';\nimport ArrowInCircle from '../../assets/svgs/arrow-in-circle';\nimport ChatButton from \"../../assets/images/chat-button.svg\";\nimport DetailForm from './DetailForm';\nimport CircleCloseButton from '../../assets/svgs/circle-close-button';\nimport PhoneSlideOutButton from './PhoneSlideOutButton';\nimport StickyFormInterestSelection from './InterestSelectionForm';\nimport Variables from '../../assets/scss/config/_variables.scss';\n\nconst StickyDrawerSide = ({\n  showFormArea,\n  interestDefinitions,\n  checkedInterests,\n  handleCheckedInterestsChanged,\n  fieldDefinitions,\n  fieldValues,\n  invalidFields,\n  submitInProgress,\n  successfullySubmitted,\n  handleFieldValueChanged,\n  handleSubmit\n}) => {\n  // panelShown constants\n  const PANEL_COLLAPSED = 0;\n  const PANEL_FIRST = 1; // interest selection, or confirmation (if already completed)\n\n  const PANEL_SECOND = 2; // form to fill\n\n  const [panelShown, setPanelShown] = useState(PANEL_COLLAPSED);\n  const [hideFromScroll, setHideFromScroll] = useState(false);\n  const [closeButtonMustBeHidden, setCloseButtonMustBeHidden] = useState(false); // used for slide-out area to ensure the form can't be closed there\n\n  const hasInterestsSelected = checkedInterestsCollection => {\n    for (var item in checkedInterestsCollection) {\n      if (checkedInterestsCollection[item] === true) {\n        return true;\n      }\n    }\n\n    return false;\n  }; // expand (or collapse) the first panel, and swap the content that is shown\n\n\n  const expandCollapseFirstPanel = expand => {\n    if (expand) {\n      document.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel').classList.remove('collapsed');\n      document.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel').classList.add('expanded');\n      document.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel-collapsed').classList.add('hide');\n      document.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel-expanded').classList.remove('hide');\n      document.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel').classList.add('active-panel');\n    } else {\n      document.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel').classList.add('collapsed');\n      document.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel').classList.remove('expanded');\n      document.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel-collapsed').classList.remove('hide');\n      document.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel-expanded').classList.add('hide');\n      document.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__second-panel').classList.remove('active-panel');\n    }\n  };\n\n  const showHideSecondPanel = show => {\n    if (show) {\n      document.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__second-panel').classList.remove('collapsed');\n      document.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__second-panel').classList.add('expanded');\n      document.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel').classList.remove('active-panel');\n      document.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__second-panel').classList.add('active-panel');\n    } else {\n      document.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__second-panel').classList.add('collapsed');\n      document.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__second-panel').classList.remove('expanded');\n      document.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel').classList.add('active-panel');\n      document.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__second-panel').classList.remove('active-panel');\n    }\n  };\n\n  const showHidePageBlocker = show => {\n    if (show) {\n      document.querySelector('.sticky-drawer-side__page-blocker').classList.add('visible');\n    } else {\n      document.querySelector('.sticky-drawer-side__page-blocker').classList.remove('visible');\n    }\n  };\n\n  const openButtonClicked = () => {\n    // show the first panel\n    expandCollapseFirstPanel(true);\n    setPanelShown(PANEL_FIRST); // if they already have interests selected, then jump straight to panel 2\n\n    if (hasInterestsSelected(checkedInterests)) {\n      showHideSecondPanel(true);\n      setPanelShown(PANEL_SECOND);\n    }\n\n    showHidePageBlocker(true);\n  };\n\n  const closeDrawerRequested = () => {\n    // console.log('closeDrawerRequested');\n    // if showing first panel expanded, then collapse it\n    if (panelShown > 1) {\n      showHideSecondPanel(false);\n    }\n\n    expandCollapseFirstPanel(false);\n    setPanelShown(PANEL_COLLAPSED);\n    showHidePageBlocker(false);\n  };\n\n  const chatButtonClicked = () => {\n    // TODO:: handle chat button being clicked\n    alert(\"Not yet implemented.\");\n  }; // initial setup\n\n\n  useEffect(() => {\n    if (showFormArea) {\n      expandCollapseFirstPanel(true);\n      setPanelShown(PANEL_FIRST);\n    }\n  }, [showFormArea]);\n  useEffect(() => {\n    if (successfullySubmitted) {\n      if (panelShown === PANEL_SECOND) {\n        showHideSecondPanel(false);\n        setPanelShown(PANEL_FIRST);\n      }\n    } else {\n      // form not yet submitted\n      // if showing first panel expanded, then show second panel if interests are selected\n      if (panelShown === 1 && hasInterestsSelected(checkedInterests)) {\n        showHideSecondPanel(true);\n        setPanelShown(PANEL_SECOND);\n      }\n    }\n  }, [checkedInterests, panelShown, successfullySubmitted]); // fired if 'hideFromScroll' changes\n\n  useEffect(() => {\n    if (hideFromScroll) {\n      expandCollapseFirstPanel(false);\n      showHideSecondPanel(false);\n      showHidePageBlocker(false);\n      setHideFromScroll(false);\n      setPanelShown(PANEL_COLLAPSED);\n    }\n  }, [hideFromScroll]);\n  var panelIsStuck = false; // Drawer should close anytime the user scrolls (so long as it's not already closed)\n\n  useScrollPosition(({\n    prevPos,\n    currPos\n  }) => {\n    // if not showing form do nothing\n    if (!showFormArea) {\n      return;\n    }\n\n    var slideOutAreaRect = document.querySelector('#lead-gen-lead-gen-slide-out-area').getBoundingClientRect(); // NOTES:: when #lead-gen-lead-gen-slide-out-area's bounding top reaches 0, it's top is at the top of the window\n    // We want to look for a bit further down (the height of the phone icon and it's padding) before we\n    // start to stick\n\n    var topIconAndPaddingOffset = 64;\n    var topIconPaddingTop = 20; // console.log('#lead-gen-lead-gen-slide-out-area rect', slideOutAreaRect);\n\n    if (slideOutAreaRect.top > topIconAndPaddingOffset) {\n      panelIsStuck = false;\n      setCloseButtonMustBeHidden(false);\n    } else {\n      panelIsStuck = true;\n      setCloseButtonMustBeHidden(true);\n    } // console.log('panelIsStuck', panelIsStuck);\n    // we want to adjust the bottom of the sticky panel to keep it in the slide out area\n\n\n    var rightRailElement = document.querySelector('.sticky-drawer-side__right-rail');\n\n    if (panelIsStuck === false) {\n      rightRailElement.style['top'] = Variables.leadGenTopSpacing;\n    } else {\n      var topVal = slideOutAreaRect.top + topIconPaddingTop;\n      rightRailElement.style['top'] = `${topVal}px`;\n    } // we need to show panel 2 if the rail is in the stuck area\n\n\n    if (panelIsStuck === true) {\n      expandCollapseFirstPanel(true);\n      showHideSecondPanel(true);\n      setPanelShown(PANEL_SECOND);\n      showHidePageBlocker(false);\n    } else {\n      // if the user is scrolling, and the panel isn't stuck, then we need to close it\n      setHideFromScroll(true);\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sticky-drawer-side\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sticky-drawer-side__page-blocker\",\n    onClick: closeDrawerRequested,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 4\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: `sticky-drawer-side__right-rail ${showFormArea === false ? 'docked-bottom' : 'docked-top'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(PhoneSlideOutButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 5\n    }\n  }), showFormArea ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sticky-drawer-side__right-rail__middle-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sticky-drawer-side__right-rail__middle-container__inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `sticky-drawer-side__right-rail__middle-container__inner__close-button-wrapper\n\t\t\t\t\t\t\t${panelShown !== 0 && !closeButtonMustBeHidden ? '' : 'hidden'}`,\n    onClick: closeDrawerRequested,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CircleCloseButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 8\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sticky-drawer-side__right-rail__middle-container__inner__first-panel collapsed active-panel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sticky-drawer-side__right-rail__middle-container__inner__first-panel-collapsed\",\n    onClick: openButtonClicked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"sticky-drawer-side__right-rail__middle-container__inner__first-panel-collapsed__heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }\n  }, successfullySubmitted ? 'Thanks for contacting us.' : 'Get Started'), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"sticky-drawer-side__right-rail__middle-container__inner__first-panel-collapsed__btn link-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ArrowInCircle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 10\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sticky-drawer-side__right-rail__middle-container__inner__first-panel-expanded hide\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 8\n    }\n  }, successfullySubmitted ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 11\n    }\n  }, \"Thank you for contacting us.\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"subtext\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 11\n    }\n  }, \"A team member will be in touch shortly.\")) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 11\n    }\n  }, \"Connect with an expert to get started.\"), /*#__PURE__*/React.createElement(StickyFormInterestSelection, {\n    interestDefinitions: interestDefinitions,\n    checkedInterests: checkedInterests,\n    handleCheckedInterestsChanged: handleCheckedInterestsChanged,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 11\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sticky-drawer-side__right-rail__middle-container__inner__second-panel collapsed\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(DetailForm, {\n    fieldDefinitions: fieldDefinitions,\n    fieldValues: fieldValues,\n    invalidFields: invalidFields,\n    handleFieldValueChanged: handleFieldValueChanged,\n    submitInProgress: submitInProgress,\n    handleSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 8\n    }\n  })))) : null));\n};\n\nexport default StickyDrawerSide;","map":{"version":3,"sources":["C:/Users/phil/OneDrive/Documents/reliant/code/narwhal-digital-reliant-wp/src/components/LeadGenFormAndPanel/StickyDrawerSide.js"],"names":["React","useState","useEffect","useScrollPosition","ArrowInCircle","DetailForm","CircleCloseButton","PhoneSlideOutButton","StickyFormInterestSelection","Variables","StickyDrawerSide","showFormArea","interestDefinitions","checkedInterests","handleCheckedInterestsChanged","fieldDefinitions","fieldValues","invalidFields","submitInProgress","successfullySubmitted","handleFieldValueChanged","handleSubmit","PANEL_COLLAPSED","PANEL_FIRST","PANEL_SECOND","panelShown","setPanelShown","hideFromScroll","setHideFromScroll","closeButtonMustBeHidden","setCloseButtonMustBeHidden","hasInterestsSelected","checkedInterestsCollection","item","expandCollapseFirstPanel","expand","document","querySelector","classList","remove","add","showHideSecondPanel","show","showHidePageBlocker","openButtonClicked","closeDrawerRequested","chatButtonClicked","alert","panelIsStuck","prevPos","currPos","slideOutAreaRect","getBoundingClientRect","topIconAndPaddingOffset","topIconPaddingTop","top","rightRailElement","style","leadGenTopSpacing","topVal"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useScrollPosition } from '@n8tb1t/use-scroll-position';\nimport ArrowInCircle from '../../assets/svgs/arrow-in-circle';\nimport ChatButton from '../../assets/images/chat-button.svg';\nimport DetailForm from './DetailForm';\nimport CircleCloseButton from '../../assets/svgs/circle-close-button';\nimport PhoneSlideOutButton from './PhoneSlideOutButton';\nimport StickyFormInterestSelection from './InterestSelectionForm';\nimport Variables from '../../assets/scss/config/_variables.scss';\n\nconst StickyDrawerSide = ({\n\tshowFormArea,\n\tinterestDefinitions, checkedInterests, handleCheckedInterestsChanged,\n\tfieldDefinitions, fieldValues, invalidFields,\n\tsubmitInProgress, successfullySubmitted,\n\thandleFieldValueChanged,\n\thandleSubmit }) =>\n{\n\n\t// panelShown constants\n\tconst PANEL_COLLAPSED = 0;\n\tconst PANEL_FIRST = 1; // interest selection, or confirmation (if already completed)\n\tconst PANEL_SECOND = 2; // form to fill\n\n\tconst [panelShown, setPanelShown] = useState(PANEL_COLLAPSED);\n\tconst [hideFromScroll, setHideFromScroll] = useState(false);\n\tconst [closeButtonMustBeHidden, setCloseButtonMustBeHidden] = useState(false); // used for slide-out area to ensure the form can't be closed there\n\n\tconst hasInterestsSelected = (checkedInterestsCollection) => {\n\t\tfor (var item in checkedInterestsCollection) {\n\t\t\tif (checkedInterestsCollection[item] === true) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t// expand (or collapse) the first panel, and swap the content that is shown\n\tconst expandCollapseFirstPanel = (expand) => {\n\t\tif (expand) {\n\t\t\tdocument.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel').classList.remove('collapsed');\n\t\t\tdocument.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel').classList.add('expanded');\n\t\t\tdocument.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel-collapsed').classList.add('hide');\n\t\t\tdocument.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel-expanded').classList.remove('hide');\n\t\t\tdocument.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel').classList.add('active-panel');\n\t\t} else {\n\t\t\tdocument.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel').classList.add('collapsed');\n\t\t\tdocument.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel').classList.remove('expanded');\n\t\t\tdocument.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel-collapsed').classList.remove('hide');\n\t\t\tdocument.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel-expanded').classList.add('hide');\n\t\t\tdocument.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__second-panel').classList.remove('active-panel');\n\t\t}\n\t}\n\n\tconst showHideSecondPanel = (show) => {\n\t\tif (show) {\n\t\t\tdocument.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__second-panel').classList.remove('collapsed');\n\t\t\tdocument.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__second-panel').classList.add('expanded');\n\t\t\tdocument.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel').classList.remove('active-panel');\n\t\t\tdocument.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__second-panel').classList.add('active-panel');\n\t\t} else {\n\t\t\tdocument.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__second-panel').classList.add('collapsed');\n\t\t\tdocument.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__second-panel').classList.remove('expanded');\n\t\t\tdocument.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__first-panel').classList.add('active-panel');\n\t\t\tdocument.querySelector('.sticky-drawer-side__right-rail__middle-container__inner__second-panel').classList.remove('active-panel');\n\t\t}\n\t}\n\n\tconst showHidePageBlocker = (show) => {\n\t\tif (show) {\n\t\t\tdocument.querySelector('.sticky-drawer-side__page-blocker').classList.add('visible');\n\t\t} else {\n\t\t\tdocument.querySelector('.sticky-drawer-side__page-blocker').classList.remove('visible');\n\t\t}\n\t}\n\n\tconst openButtonClicked = () => {\n\t\t// show the first panel\n\t\texpandCollapseFirstPanel(true);\n\t\tsetPanelShown(PANEL_FIRST);\n\n\t\t// if they already have interests selected, then jump straight to panel 2\n\t\tif (hasInterestsSelected(checkedInterests)) {\n\t\t\tshowHideSecondPanel(true);\n\t\t\tsetPanelShown(PANEL_SECOND);\n\t\t}\n\n\t\tshowHidePageBlocker(true);\n\t}\n\n\tconst closeDrawerRequested = () => {\n\t\t// console.log('closeDrawerRequested');\n\t\t// if showing first panel expanded, then collapse it\n\t\tif (panelShown > 1) {\n\t\t\tshowHideSecondPanel(false);\n\t\t}\n\n\t\texpandCollapseFirstPanel(false);\n\t\tsetPanelShown(PANEL_COLLAPSED);\n\t\tshowHidePageBlocker(false);\n\t}\n\n\tconst chatButtonClicked = () => {\n\t\t// TODO:: handle chat button being clicked\n\t\talert(\"Not yet implemented.\");\n\t}\n\n\t// initial setup\n\tuseEffect(() => {\n\t\tif (showFormArea) {\n\t\t\texpandCollapseFirstPanel(true);\n\t\t\tsetPanelShown(PANEL_FIRST);\n\t\t}\n\t}, [showFormArea]);\n\n\tuseEffect(() => {\n\t\tif (successfullySubmitted) {\n\t\t\tif (panelShown === PANEL_SECOND) {\n\t\t\t\tshowHideSecondPanel(false);\n\t\t\t\tsetPanelShown(PANEL_FIRST);\n\t\t\t}\n\t\t}\n\t\telse { // form not yet submitted\n\t\t\t// if showing first panel expanded, then show second panel if interests are selected\n\t\t\tif (panelShown === 1 && hasInterestsSelected(checkedInterests)) {\n\t\t\t\tshowHideSecondPanel(true);\n\t\t\t\tsetPanelShown(PANEL_SECOND);\n\t\t\t}\n\t\t}\n\n\t}, [checkedInterests, panelShown, successfullySubmitted]);\n\n\t// fired if 'hideFromScroll' changes\n\tuseEffect(() => {\n\t\tif (hideFromScroll) {\n\t\t\texpandCollapseFirstPanel(false);\n\t\t\tshowHideSecondPanel(false);\n\t\t\tshowHidePageBlocker(false);\n\t\t\tsetHideFromScroll(false);\n\t\t\tsetPanelShown(PANEL_COLLAPSED);\n\t\t}\n\t}, [hideFromScroll]);\n\n\tvar panelIsStuck = false;\n\n\t// Drawer should close anytime the user scrolls (so long as it's not already closed)\n\tuseScrollPosition(({ prevPos, currPos}) => {\n\t\t// if not showing form do nothing\n\t\tif (!showFormArea) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar slideOutAreaRect = document.querySelector('#lead-gen-lead-gen-slide-out-area').getBoundingClientRect();\n\n\t\t// NOTES:: when #lead-gen-lead-gen-slide-out-area's bounding top reaches 0, it's top is at the top of the window\n\t\t// We want to look for a bit further down (the height of the phone icon and it's padding) before we\n\t\t// start to stick\n\t\tvar topIconAndPaddingOffset = 64;\n\t\tvar topIconPaddingTop = 20;\n\n\t\t// console.log('#lead-gen-lead-gen-slide-out-area rect', slideOutAreaRect);\n\t\tif (slideOutAreaRect.top > topIconAndPaddingOffset) {\n\t\t\tpanelIsStuck = false;\n\t\t\tsetCloseButtonMustBeHidden(false);\n\t\t}\n\t\telse {\n\t\t\tpanelIsStuck = true;\n\t\t\tsetCloseButtonMustBeHidden(true);\n\t\t}\n\t\t// console.log('panelIsStuck', panelIsStuck);\n\n\t\t// we want to adjust the bottom of the sticky panel to keep it in the slide out area\n\t\tvar rightRailElement = document.querySelector('.sticky-drawer-side__right-rail');\n\t\tif (panelIsStuck === false) {\n\t\t\trightRailElement.style['top'] = Variables.leadGenTopSpacing;\n\t\t} else {\n\t\t\tvar topVal = slideOutAreaRect.top + topIconPaddingTop;\n\t\t\trightRailElement.style['top'] = `${topVal}px`;\n\t\t}\n\n\t\t// we need to show panel 2 if the rail is in the stuck area\n\t\tif (panelIsStuck === true) {\n\t\t\texpandCollapseFirstPanel(true);\n\t\t\tshowHideSecondPanel(true);\n\t\t\tsetPanelShown(PANEL_SECOND);\n\t\t\tshowHidePageBlocker(false);\n\t\t} else {\n\t\t\t// if the user is scrolling, and the panel isn't stuck, then we need to close it\n\t\t\tsetHideFromScroll(true);\n\t\t}\n\t})\n\n\treturn (\n\t\t<div className=\"sticky-drawer-side\">\n\t\t\t<div className=\"sticky-drawer-side__page-blocker\" onClick={closeDrawerRequested} />\n\t\t\t<div className={`sticky-drawer-side__right-rail ${showFormArea === false ? 'docked-bottom' : 'docked-top' }`}>\n\t\t\t\t<PhoneSlideOutButton />\n\n\t\t\t\t{ showFormArea ?\n\t\t\t\t<div className=\"sticky-drawer-side__right-rail__middle-container\">\n\t\t\t\t\t<div className=\"sticky-drawer-side__right-rail__middle-container__inner\">\n\t\t\t\t\t\t<div className={`sticky-drawer-side__right-rail__middle-container__inner__close-button-wrapper\n\t\t\t\t\t\t\t${(panelShown !== 0 && !closeButtonMustBeHidden) ? '' : 'hidden'}`}\n\t\t\t\t\t\t\tonClick={closeDrawerRequested}>\n\t\t\t\t\t\t\t<CircleCloseButton />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"sticky-drawer-side__right-rail__middle-container__inner__first-panel collapsed active-panel\">\n\t\t\t\t\t\t\t<div className=\"sticky-drawer-side__right-rail__middle-container__inner__first-panel-collapsed\"\n\t\t\t\t\t\t\t\tonClick={openButtonClicked}>\n\t\t\t\t\t\t\t\t<h6 className=\"sticky-drawer-side__right-rail__middle-container__inner__first-panel-collapsed__heading\">\n\t\t\t\t\t\t\t\t\t{ successfullySubmitted ? 'Thanks for contacting us.' : 'Get Started' }\n\t\t\t\t\t\t\t\t</h6>\n\t\t\t\t\t\t\t\t<button className=\"sticky-drawer-side__right-rail__middle-container__inner__first-panel-collapsed__btn link-button\">\n\t\t\t\t\t\t\t\t\t<ArrowInCircle />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"sticky-drawer-side__right-rail__middle-container__inner__first-panel-expanded hide\">\n\t\t\t\t\t\t\t\t{ successfullySubmitted ?\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<h6>Thank you for contacting us.</h6>\n\t\t\t\t\t\t\t\t\t\t<p className=\"subtext\">A team member will be in touch shortly.</p>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t:\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<h6>Connect with an expert to get started.</h6>\n\t\t\t\t\t\t\t\t\t\t<StickyFormInterestSelection\n\t\t\t\t\t\t\t\t\t\t\tinterestDefinitions={interestDefinitions}\n\t\t\t\t\t\t\t\t\t\t\tcheckedInterests={checkedInterests}\n\t\t\t\t\t\t\t\t\t\t\thandleCheckedInterestsChanged={handleCheckedInterestsChanged} />\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"sticky-drawer-side__right-rail__middle-container__inner__second-panel collapsed\">\n\t\t\t\t\t\t\t<DetailForm\n\t\t\t\t\t\t\t\tfieldDefinitions={fieldDefinitions}\n\t\t\t\t\t\t\t\tfieldValues={fieldValues}\n\t\t\t\t\t\t\t\tinvalidFields={invalidFields}\n\t\t\t\t\t\t\t\thandleFieldValueChanged={handleFieldValueChanged}\n\t\t\t\t\t\t\t\tsubmitInProgress={submitInProgress}\n\t\t\t\t\t\t\t\thandleSubmit={handleSubmit} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t: null\n\t\t\t\t}\n\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default StickyDrawerSide;\n"]},"metadata":{},"sourceType":"module"}