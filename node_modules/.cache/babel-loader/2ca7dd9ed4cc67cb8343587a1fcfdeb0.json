{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\phil\\\\OneDrive\\\\Documents\\\\reliant\\\\code\\\\narwhal-digital-reliant-wp\\\\src\\\\templates\\\\ProductCatalog\\\\index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport useQueryState from 'use-query-state';\nimport gql from 'graphql-tag';\nimport { useQuery } from '@apollo/react-hooks';\nimport queryString from 'query-string';\nimport CatalogMobile from './CatalogMobile';\nimport CatalogNonMobile from './CatalogNonMobile';\nimport FillImage from \"../../assets/images/circuit-board-ram.jpg\";\nimport LoadingPage from '../../components/LoadingPage';\nimport SideBars9 from \"../../assets/images/side-bars-9.png\";\n\nconst ProductCatalog = props => {\n  const [searchText, setSearchText] = useState('', 'searchText');\n  const [submittedSearchText, setSubmittedSearchText] = useQueryState('', 'submittedSearchText');\n  const [checkedBrands, setCheckedBrands] = useQueryState([], 'brands');\n  const [checkedProductFamilyTypes, setCheckedProductFamilyTypes] = useQueryState([], 'familyTypes');\n  const [selectedProductFamilyId, setSelectedProductFamilyId] = useQueryState(-1, 'productFamilyId');\n  const BRAND_AND_TYPE_QUERY = gql`\n\t\tquery BRAND_AND_TYPE_QUERY {\n\t\t\tproductBrands(where: {orderby: {field: TITLE, order: ASC}}) {\n\t\t\t\tnodes {\n\t\t\t\t\ttitle\n\t\t\t\t\tlink\n\t\t\t\t\tproductCache\n\t\t\t\t\tproductBrandId\n\t\t\t\t\tBrandInformation  {\n\t\t\t\t\t\tlinkFromHardwareCatalog {\n\t\t\t\t\t\t\ttarget\n\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\turl\n\t\t\t\t\t\t}\n\t\t\t\t\t\tadditionalLinks {\n\t\t\t\t\t\t\tlink {\n\t\t\t\t\t\t\t\ttarget\n\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\turl\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tproductFamilyTypes(where: {orderby: {field: TITLE, order: ASC}}) {\n\t\t\t\tnodes {\n\t\t\t\t\ttitle\n\t\t\t\t\tproductFamilyTypeId\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t`;\n\n  const handleCheckedBrandsChanged = event => {\n    const brandIdAsString = event.target.id; // NOTE:: you have to create a new array in order for the value change to propogate  / fire (otherwise useEffect doesnt fire for example) ref: https://stackoverflow.com/a/54621059/18005\n\n    let newCheckedBrands = [...checkedBrands]; // update the array to add/remove the item checked/unchecked\n\n    if (!event.target.checked) {\n      // not checked\n      if (newCheckedBrands.includes(brandIdAsString)) {\n        // remove it\n        const removeIndex = newCheckedBrands.indexOf(brandIdAsString);\n        newCheckedBrands.splice(removeIndex, 1);\n      }\n    } else {\n      // checked\n      // if it contains it already then do nothing\n      if (!newCheckedBrands.includes(brandIdAsString)) {\n        newCheckedBrands.push(brandIdAsString); // add it\n      }\n    } // console.log('index.handleCheckedBrandsChanged is clearing search texts');\n\n\n    resetSearchText();\n    setSelectedProductFamilyId(-1);\n    setCheckedBrands(newCheckedBrands);\n  };\n\n  const handleCheckedProductTypesChanged = event => {\n    const productTypeIdAsString = event.target.id; // NOTE:: you have to create a new array in order for the value change to propogate  / fire (otherwise useEffect doesnt fire for example) ref: https://stackoverflow.com/a/54621059/18005\n\n    let newCheckedProductFamilyTypes = [...checkedProductFamilyTypes]; // update the array to add/remove the item checked/unchecked\n\n    if (!event.target.checked) {\n      // not checked\n      if (newCheckedProductFamilyTypes.includes(productTypeIdAsString)) {\n        // remove it\n        const removeIndex = newCheckedProductFamilyTypes.indexOf(productTypeIdAsString);\n        newCheckedProductFamilyTypes.splice(removeIndex, 1);\n      }\n    } else {\n      // checked\n      // if it contains it already then do nothing\n      if (!newCheckedProductFamilyTypes.includes(productTypeIdAsString)) {\n        newCheckedProductFamilyTypes.push(productTypeIdAsString); // add it\n      }\n    } // console.log('index.handleCheckedProductTypesChanged is clearing search texts');\n\n\n    resetSearchText();\n    setCheckedProductFamilyTypes(newCheckedProductFamilyTypes);\n    setSelectedProductFamilyId(-1);\n  };\n\n  const clearFilters = () => {\n    let newCheckedBrands = [];\n    let newCheckedProductFamilyTypes = [];\n    setCheckedBrands(newCheckedBrands);\n    setCheckedProductFamilyTypes(newCheckedProductFamilyTypes);\n  };\n\n  const onSearchTextChange = ev => {\n    ev.preventDefault();\n    setSearchText(ev.target.value);\n    clearFilters();\n  };\n\n  const onSearchFormSubmit = ev => {\n    ev.preventDefault();\n    setSubmittedSearchText(searchText);\n  };\n\n  const onProductFamilySelected = (ptFamily, onDesktop) => {\n    // console.log('productFamilySelected', ptFamily);\n    // scroll to top of results area, but only if on mobile\n    if (typeof onDesktop !== 'undefined' && onDesktop) {\n      const resultsPanel = document.querySelector('.results-panel');\n\n      if (resultsPanel) {\n        const scrollToY = resultsPanel.getBoundingClientRect().top;\n        window.scrollBy(0, scrollToY);\n      } else {\n        window.scrollTo(0, 0);\n      }\n    }\n\n    setSelectedProductFamilyId(ptFamily);\n  };\n\n  const resetSearchText = () => {\n    setSearchText(\"\");\n    setSubmittedSearchText(\"\");\n  };\n\n  const headerStyles = {\n    backgroundImage: `url('${FillImage}')`,\n    backgroundSize: `cover`,\n    backgroundPosition: `center center`,\n    backgroundRepeat: `no-repeat`\n  };\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(BRAND_AND_TYPE_QUERY, {});\n  useEffect(() => {\n    // see if a query param was passed in, if so, do immediate search\n    const urlParams = queryString.parse(props.location.search);\n    let searchTerm = \"\";\n\n    if ('searchTerm' in urlParams) {\n      searchTerm = urlParams['searchTerm'];\n\n      if (submittedSearchText !== searchTerm) {\n        setSearchText(searchTerm);\n        setSubmittedSearchText(searchTerm);\n      }\n\n      props.location.search = \"\";\n    }\n  }, [props.location.search, searchText, submittedSearchText, setSearchText, setSubmittedSearchText]);\n  useEffect(() => {// console.log('index.js checkedBrands changed, useEffect hit', checkedBrands);\n  }, [checkedBrands]);\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(LoadingPage, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 10\n      }\n    });\n  }\n\n  if (error) {\n    console.error('Error loading Product Catalog', error);\n    return /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 10\n      }\n    }, \"Error loading Product Catalog\");\n  }\n\n  if (!data.productBrands || data.productBrands.length < 1) return /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 67\n    }\n  }, \"No brands found\");\n  if (!data.productFamilyTypes || data.productFamilyTypes.length < 1) return /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 77\n    }\n  }, \"No product types found\");\n  const brandsData = data.productBrands.nodes;\n  const productFamilyTypesData = data.productFamilyTypes.nodes; // console.log('brand data', brandsData);\n  // console.log('product family data', productFamilyTypesData);\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"section\", {\n    className: `product-catalog bg-lt-grey`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `product-catalog__header`,\n    style: headerStyles,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: `side-bars`,\n    src: SideBars9,\n    alt: \"Side Bars\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 6\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: `product-catalog__header__inner container`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `row`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 col-md-6 product-catalog__header__inner__left-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: `product-catalog__header__inner__title`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 9\n    }\n  }, \"Hardware Catalog\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 col-md-6 product-catalog__header__inner__right-col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"product-catalog__header__inner__right-col__listing\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"product-catalog__header__inner__right-col__listing__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 10\n    }\n  }, \"Find the brands you're looking for\"), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"product-catalog__header__inner__right-col__listing__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 10\n    }\n  }, \"Get product specs and user manuals\"), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"product-catalog__header__inner__right-col__listing__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 10\n    }\n  }, \"Discover products that pair\"), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"product-catalog__header__inner__right-col__listing__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 10\n    }\n  }, \"Look up end-of-life information\"))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"--desktop-only product-catalog\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(CatalogNonMobile, {\n    searchText: searchText,\n    submittedSearchText: submittedSearchText,\n    onSearchTextChange: onSearchTextChange,\n    onSearchFormSubmit: onSearchFormSubmit,\n    brandsData: brandsData,\n    checkedBrands: checkedBrands,\n    handleCheckedBrandsChanged: handleCheckedBrandsChanged,\n    onProductFamilySelected: onProductFamilySelected,\n    selectedProductFamilyId: selectedProductFamilyId,\n    productFamilyTypesData: productFamilyTypesData,\n    checkedProductFamilyTypes: checkedProductFamilyTypes,\n    handleCheckedProductTypesChanged: handleCheckedProductTypesChanged,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"--mobile-only product-catalog\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(CatalogMobile, {\n    searchText: searchText,\n    submittedSearchText: submittedSearchText,\n    onSearchTextChange: onSearchTextChange,\n    resetSearchText: resetSearchText,\n    onSearchFormSubmit: onSearchFormSubmit,\n    brandsData: brandsData,\n    checkedBrands: checkedBrands,\n    handleCheckedBrandsChanged: handleCheckedBrandsChanged,\n    onProductFamilySelected: onProductFamilySelected,\n    selectedProductFamilyId: selectedProductFamilyId,\n    productFamilyTypesData: productFamilyTypesData,\n    checkedProductFamilyTypes: checkedProductFamilyTypes,\n    handleCheckedProductTypesChanged: handleCheckedProductTypesChanged,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 5\n    }\n  })));\n};\n\nexport default ProductCatalog;","map":{"version":3,"sources":["C:/Users/phil/OneDrive/Documents/reliant/code/narwhal-digital-reliant-wp/src/templates/ProductCatalog/index.js"],"names":["React","useState","useEffect","useQueryState","gql","useQuery","queryString","CatalogMobile","CatalogNonMobile","FillImage","LoadingPage","SideBars9","ProductCatalog","props","searchText","setSearchText","submittedSearchText","setSubmittedSearchText","checkedBrands","setCheckedBrands","checkedProductFamilyTypes","setCheckedProductFamilyTypes","selectedProductFamilyId","setSelectedProductFamilyId","BRAND_AND_TYPE_QUERY","handleCheckedBrandsChanged","event","brandIdAsString","target","id","newCheckedBrands","checked","includes","removeIndex","indexOf","splice","push","resetSearchText","handleCheckedProductTypesChanged","productTypeIdAsString","newCheckedProductFamilyTypes","clearFilters","onSearchTextChange","ev","preventDefault","value","onSearchFormSubmit","onProductFamilySelected","ptFamily","onDesktop","resultsPanel","document","querySelector","scrollToY","getBoundingClientRect","top","window","scrollBy","scrollTo","headerStyles","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","loading","error","data","urlParams","parse","location","search","searchTerm","console","productBrands","length","productFamilyTypes","brandsData","nodes","productFamilyTypesData"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport useQueryState from 'use-query-state';\nimport gql from 'graphql-tag';\nimport { useQuery } from '@apollo/react-hooks';\nimport queryString from 'query-string'\nimport CatalogMobile from './CatalogMobile';\nimport CatalogNonMobile from './CatalogNonMobile';\nimport FillImage from \"../../assets/images/circuit-board-ram.jpg\";\nimport LoadingPage from '../../components/LoadingPage';\nimport SideBars9 from \"../../assets/images/side-bars-9.png\";\n\nconst ProductCatalog = props => {\n\tconst [searchText, setSearchText] = useState('', 'searchText');\n\tconst [submittedSearchText, setSubmittedSearchText] = useQueryState('', 'submittedSearchText');\n\tconst [checkedBrands, setCheckedBrands] = useQueryState([], 'brands');\n\tconst [checkedProductFamilyTypes, setCheckedProductFamilyTypes] = useQueryState([], 'familyTypes');\n\tconst [selectedProductFamilyId, setSelectedProductFamilyId] = useQueryState(-1, 'productFamilyId');\n\n\tconst BRAND_AND_TYPE_QUERY = gql`\n\t\tquery BRAND_AND_TYPE_QUERY {\n\t\t\tproductBrands(where: {orderby: {field: TITLE, order: ASC}}) {\n\t\t\t\tnodes {\n\t\t\t\t\ttitle\n\t\t\t\t\tlink\n\t\t\t\t\tproductCache\n\t\t\t\t\tproductBrandId\n\t\t\t\t\tBrandInformation  {\n\t\t\t\t\t\tlinkFromHardwareCatalog {\n\t\t\t\t\t\t\ttarget\n\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\turl\n\t\t\t\t\t\t}\n\t\t\t\t\t\tadditionalLinks {\n\t\t\t\t\t\t\tlink {\n\t\t\t\t\t\t\t\ttarget\n\t\t\t\t\t\t\t\ttitle\n\t\t\t\t\t\t\t\turl\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tproductFamilyTypes(where: {orderby: {field: TITLE, order: ASC}}) {\n\t\t\t\tnodes {\n\t\t\t\t\ttitle\n\t\t\t\t\tproductFamilyTypeId\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t`;\n\n\tconst handleCheckedBrandsChanged = (event) => {\n\t\tconst brandIdAsString = event.target.id;\n\n\t\t// NOTE:: you have to create a new array in order for the value change to propogate  / fire (otherwise useEffect doesnt fire for example) ref: https://stackoverflow.com/a/54621059/18005\n\t\tlet newCheckedBrands = [...checkedBrands];\n\n\t\t// update the array to add/remove the item checked/unchecked\n\t\tif (!event.target.checked) { // not checked\n\t\t\tif (newCheckedBrands.includes(brandIdAsString)) { // remove it\n\t\t\t\tconst removeIndex = newCheckedBrands.indexOf(brandIdAsString);\n\t\t\t\tnewCheckedBrands.splice(removeIndex, 1);\n\t\t\t}\n\t\t} else { // checked\n\t\t\t// if it contains it already then do nothing\n\t\t\tif (!newCheckedBrands.includes(brandIdAsString)) {\n\t\t\t\tnewCheckedBrands.push(brandIdAsString); // add it\n\t\t\t}\n\t\t}\n\n\t\t// console.log('index.handleCheckedBrandsChanged is clearing search texts');\n\t\tresetSearchText();\n\t\tsetSelectedProductFamilyId(-1);\n\t\tsetCheckedBrands(newCheckedBrands);\n\t}\n\n\tconst handleCheckedProductTypesChanged = (event) => {\n\t\tconst productTypeIdAsString = event.target.id;\n\n\t\t// NOTE:: you have to create a new array in order for the value change to propogate  / fire (otherwise useEffect doesnt fire for example) ref: https://stackoverflow.com/a/54621059/18005\n\t\tlet newCheckedProductFamilyTypes = [...checkedProductFamilyTypes];\n\n\t\t// update the array to add/remove the item checked/unchecked\n\t\tif (!event.target.checked) { // not checked\n\t\t\tif (newCheckedProductFamilyTypes.includes(productTypeIdAsString)) { // remove it\n\t\t\t\tconst removeIndex = newCheckedProductFamilyTypes.indexOf(productTypeIdAsString);\n\t\t\t\tnewCheckedProductFamilyTypes.splice(removeIndex, 1);\n\t\t\t}\n\t\t} else { // checked\n\t\t\t// if it contains it already then do nothing\n\t\t\tif (!newCheckedProductFamilyTypes.includes(productTypeIdAsString)) {\n\t\t\t\tnewCheckedProductFamilyTypes.push(productTypeIdAsString); // add it\n\t\t\t}\n\t\t}\n\n\t\t// console.log('index.handleCheckedProductTypesChanged is clearing search texts');\n\t\tresetSearchText();\n\t\tsetCheckedProductFamilyTypes(newCheckedProductFamilyTypes);\n\t\tsetSelectedProductFamilyId(-1);\n\t}\n\n\tconst clearFilters = () => {\n\t\tlet newCheckedBrands = [];\n\t\tlet newCheckedProductFamilyTypes = [];\n\t\tsetCheckedBrands(newCheckedBrands);\n\t\tsetCheckedProductFamilyTypes(newCheckedProductFamilyTypes);\n\t}\n\n\tconst onSearchTextChange = (ev) => {\n\t\tev.preventDefault();\n\n\t\tsetSearchText(ev.target.value);\n\t\tclearFilters();\n\t}\n\n\tconst onSearchFormSubmit = (ev) => {\n\t\tev.preventDefault();\n\n\t\tsetSubmittedSearchText(searchText);\n\t}\n\n\tconst onProductFamilySelected = (ptFamily, onDesktop) => {\n\t\t// console.log('productFamilySelected', ptFamily);\n\n\t\t// scroll to top of results area, but only if on mobile\n\t\tif (typeof onDesktop !== 'undefined' && onDesktop) {\n\t\t\tconst resultsPanel = document.querySelector('.results-panel');\n\t\t\tif (resultsPanel) {\n\t\t\t\tconst scrollToY = resultsPanel.getBoundingClientRect().top;\n\t\t\t\twindow.scrollBy(0, scrollToY);\n\t\t\t} else {\n\t\t\t\twindow.scrollTo(0, 0);\n\t\t\t}\n\t\t}\n\n\t\tsetSelectedProductFamilyId(ptFamily);\n\t}\n\n\tconst resetSearchText = () => {\n\t\tsetSearchText(\"\");\n\t\tsetSubmittedSearchText(\"\");\n\t}\n\n\tconst headerStyles = {\n\t\tbackgroundImage: `url('${FillImage}')`,\n\t\tbackgroundSize: `cover`,\n\t\tbackgroundPosition: `center center`,\n\t\tbackgroundRepeat: `no-repeat`\n\t};\n\n\tconst { loading, error, data } = useQuery(BRAND_AND_TYPE_QUERY, {});\n\n\tuseEffect(() => {\n\t\t// see if a query param was passed in, if so, do immediate search\n\t\tconst urlParams = queryString.parse(props.location.search)\n\t\tlet searchTerm = \"\";\n\t\tif ('searchTerm' in urlParams) {\n\t\t\tsearchTerm = urlParams['searchTerm'];\n\n\t\t\tif (submittedSearchText !== searchTerm) {\n\t\t\t\tsetSearchText(searchTerm);\n\t\t\t\tsetSubmittedSearchText(searchTerm);\n\t\t\t}\n\t\t\tprops.location.search = \"\";\n\t\t}\n\t}, [props.location.search, searchText, submittedSearchText, setSearchText, setSubmittedSearchText])\n\n\tuseEffect(() => {\n\t\t// console.log('index.js checkedBrands changed, useEffect hit', checkedBrands);\n\t}, [checkedBrands])\n\n\tif (loading) {\n\t\treturn <LoadingPage />;\n\t}\n\tif (error) {\n\t\tconsole.error('Error loading Product Catalog', error);\n\t\treturn <p>Error loading Product Catalog</p>;\n\t}\n\tif (!data.productBrands || data.productBrands.length < 1) return <p>No brands found</p>;\n\tif (!data.productFamilyTypes || data.productFamilyTypes.length < 1) return <p>No product types found</p>;\n\n\tconst brandsData = data.productBrands.nodes;\n\tconst productFamilyTypesData = data.productFamilyTypes.nodes;\n\t// console.log('brand data', brandsData);\n\t// console.log('product family data', productFamilyTypesData);\n\n\treturn (\n\t\t<>\n\t\t\t<section className={`product-catalog bg-lt-grey`}>\n\t\t\t\t<div className={`product-catalog__header`} style={headerStyles}>\n\t\t\t\t\t<img className={`side-bars`} src={SideBars9} alt={\"Side Bars\"} />\n\t\t\t\t\t<div className={`product-catalog__header__inner container`}>\n\t\t\t\t\t\t<div className={`row`}>\n\t\t\t\t\t\t\t<div className='col-12 col-md-6 product-catalog__header__inner__left-col'>\n\t\t\t\t\t\t\t\t<h1 className={`product-catalog__header__inner__title`}>Hardware Catalog</h1>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className='col-12 col-md-6 product-catalog__header__inner__right-col'>\n\t\t\t\t\t\t\t\t<ul className='product-catalog__header__inner__right-col__listing'>\n\t\t\t\t\t\t\t\t\t<li className='product-catalog__header__inner__right-col__listing__item'>Find the brands you're looking for</li>\n\t\t\t\t\t\t\t\t\t<li className='product-catalog__header__inner__right-col__listing__item'>Get product specs and user manuals</li>\n\t\t\t\t\t\t\t\t\t<li className='product-catalog__header__inner__right-col__listing__item'>Discover products that pair</li>\n\t\t\t\t\t\t\t\t\t<li className='product-catalog__header__inner__right-col__listing__item'>Look up end-of-life information</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t\t<div className=\"--desktop-only product-catalog\">\n\t\t\t\t<CatalogNonMobile\n\t\t\t\t\tsearchText={searchText}\n\t\t\t\t\tsubmittedSearchText={submittedSearchText}\n\t\t\t\t\tonSearchTextChange={onSearchTextChange}\n\t\t\t\t\tonSearchFormSubmit={onSearchFormSubmit}\n\t\t\t\t\tbrandsData={brandsData}\n\t\t\t\t\tcheckedBrands={checkedBrands}\n\t\t\t\t\thandleCheckedBrandsChanged={handleCheckedBrandsChanged}\n\t\t\t\t\tonProductFamilySelected={onProductFamilySelected}\n\t\t\t\t\tselectedProductFamilyId={selectedProductFamilyId}\n\t\t\t\t\tproductFamilyTypesData={productFamilyTypesData}\n\t\t\t\t\tcheckedProductFamilyTypes={checkedProductFamilyTypes}\n\t\t\t\t\thandleCheckedProductTypesChanged={handleCheckedProductTypesChanged} />\n\t\t\t</div>\n\t\t\t<div className=\"--mobile-only product-catalog\">\n\t\t\t\t<CatalogMobile\n\t\t\t\t\tsearchText={searchText}\n\t\t\t\t\tsubmittedSearchText={submittedSearchText}\n\t\t\t\t\tonSearchTextChange={onSearchTextChange}\n\t\t\t\t\tresetSearchText={resetSearchText}\n\t\t\t\t\tonSearchFormSubmit={onSearchFormSubmit}\n\t\t\t\t\tbrandsData={brandsData}\n\t\t\t\t\tcheckedBrands={checkedBrands}\n\t\t\t\t\thandleCheckedBrandsChanged={handleCheckedBrandsChanged}\n\t\t\t\t\tonProductFamilySelected={onProductFamilySelected}\n\t\t\t\t\tselectedProductFamilyId={selectedProductFamilyId}\n\t\t\t\t\tproductFamilyTypesData={productFamilyTypesData}\n\t\t\t\t\tcheckedProductFamilyTypes={checkedProductFamilyTypes}\n\t\t\t\t\thandleCheckedProductTypesChanged={handleCheckedProductTypesChanged} />\n\t\t\t</div>\n\t\t</>\n\t)\n}\n\nexport default ProductCatalog;\n"]},"metadata":{},"sourceType":"module"}